!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("vue"),require("@vueuse/core"),require("@imengyu/vue3-context-menu")):"function"==typeof define&&define.amd?define(["exports","vue","@vueuse/core","@imengyu/vue3-context-menu"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).RpaWebUI={},e.Vue,e.VueUse,e.ContextMenu)}(this,function(e,t,o,l){"use strict";var n=Object.defineProperty,r=(e,t,o)=>((e,t,o)=>t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o)(e,"symbol"!=typeof t?t+"":t,o);let a;function i(){i.init||(i.init=!0,a=-1!==function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(t>0)return parseInt(e.substring(t+5,e.indexOf(".",t)),10);if(e.indexOf("Trident/")>0){var o=e.indexOf("rv:");return parseInt(e.substring(o+3,e.indexOf(".",o)),10)}var l=e.indexOf("Edge/");return l>0?parseInt(e.substring(l+5,e.indexOf(".",l)),10):-1}())}var s={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){i(),t.nextTick(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",a&&this.$el.appendChild(e),e.data="about:blank",a||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!a&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const c=t.withScopeId("data-v-b329ee4c");t.pushScopeId("data-v-b329ee4c");const d={class:"resize-observer",tabindex:"-1"};t.popScopeId();const u=c((e,o,l,n,r,a)=>(t.openBlock(),t.createBlock("div",d)));function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t,o){return t&&function(e,t){for(var o=0;o<t.length;o++){var l=t[o];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}(e.prototype,t),e}function m(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,l=new Array(t);o<t;o++)l[o]=e[o];return l}function f(e,t){if(e===t)return!0;if("object"===p(e)){for(var o in e)if(!f(e[o],t[o]))return!1;return!0}return!1}s.render=u,s.__scopeId="data-v-b329ee4c",s.__file="src/components/ResizeObserver.vue";var v=function(){function e(t,o,l){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t,this.observer=null,this.frozen=!1,this.createObserver(o,l)}return h(e,[{key:"createObserver",value:function(e,o){var l=this;if(this.observer&&this.destroyObserver(),!this.frozen){var n;if(this.options="function"==typeof(n=e)?{callback:n}:n,this.callback=function(e,t){l.options.callback(e,t),e&&l.options.once&&(l.frozen=!0,l.destroyObserver())},this.callback&&this.options.throttle){var r=(this.options.throttleOptions||{}).leading;this.callback=function(e,t){var o,l,n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=function(a){for(var i=arguments.length,s=new Array(i>1?i-1:0),c=1;c<i;c++)s[c-1]=arguments[c];if(n=s,!o||a!==l){var d=r.leading;"function"==typeof d&&(d=d(a,l)),o&&a===l||!d||e.apply(void 0,[a].concat(m(n))),l=a,clearTimeout(o),o=setTimeout(function(){e.apply(void 0,[a].concat(m(n))),o=0},t)}};return a._clear=function(){clearTimeout(o),o=null},a}(this.callback,this.options.throttle,{leading:function(e){return"both"===r||"visible"===r&&e||"hidden"===r&&!e}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(e){var t=e[0];if(e.length>1){var o=e.find(function(e){return e.isIntersecting});o&&(t=o)}if(l.callback){var n=t.isIntersecting&&t.intersectionRatio>=l.threshold;if(n===l.oldResult)return;l.oldResult=n,l.callback(n,t)}},this.options.intersection),t.nextTick(function(){l.observer&&l.observer.observe(l.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&"number"==typeof this.options.intersection.threshold?this.options.intersection.threshold:0}}]),e}();function w(e,t,o){var l=t.value;if(l)if("undefined"==typeof IntersectionObserver)console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var n=new v(e,l,o);e._vue_visibilityState=n}}function y(e){var t=e._vue_visibilityState;t&&(t.destroyObserver(),delete e._vue_visibilityState)}var b={beforeMount:w,updated:function(e,t,o){var l=t.value;if(!f(l,t.oldValue)){var n=e._vue_visibilityState;l?n?n.createObserver(l,o):w(e,{value:l},o):y(e)}},unmounted:y};var C=1e3,k=/(auto|scroll)/;function E(e,t){return null===e.parentNode?t:E(e.parentNode,t.concat([e]))}var S=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},R=function(e){return k.test(function(e){return S(e,"overflow")+S(e,"overflow-y")+S(e,"overflow-x")}(e))};function N(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var t=E(e.parentNode,[]),o=0;o<t.length;o+=1)if(R(t[o]))return t[o];return document.scrollingElement||document.documentElement}}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(e){return["vertical","horizontal"].includes(e)}},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"}};function V(){return this.items.length&&"object"!==x(this.items[0])}var _=!1;if("undefined"!=typeof window){_=!1;try{var A=Object.defineProperty({},"passive",{get:function(){_=!0}});window.addEventListener("test",null,A)}catch(sl){}}let $=0;var T={name:"RecycleScroller",components:{ResizeObserver:s},directives:{ObserveVisibility:b},props:{...I,itemSize:{type:Number,default:null},gridItems:{type:Number,default:void 0},itemSecondarySize:{type:Number,default:void 0},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1},updateInterval:{type:Number,default:0},skipHover:{type:Boolean,default:!1},listTag:{type:String,default:"div"},itemTag:{type:String,default:"div"},listClass:{type:[String,Object,Array],default:""},itemClass:{type:[String,Object,Array],default:""}},emits:["resize","visible","hidden","update","scroll-start","scroll-end"],data:()=>({pool:[],totalSize:0,ready:!1,hoverKey:null}),computed:{sizes(){if(null===this.itemSize){const e={"-1":{accumulator:0}},t=this.items,o=this.sizeField,l=this.minItemSize;let n,r=1e4,a=0;for(let i=0,s=t.length;i<s;i++)n=t[i][o]||l,n<r&&(r=n),a+=n,e[i]={accumulator:a,size:n};return this.$_computedMinItemSize=r,e}return[]},simpleArray:V,itemIndexByKey(){const{keyField:e,items:t}=this,o={};for(let l=0,n=t.length;l<n;l++)o[t[l][e]]=l;return o}},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0},gridItems(){this.updateVisibleItems(!0)},itemSecondarySize(){this.updateVisibleItems(!0)}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1)),this.gridItems&&!this.itemSize&&console.error("[vue-recycle-scroller] You must provide an itemSize when using gridItems")},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},activated(){const e=this.$_lastUpdateScrollPosition;"number"==typeof e&&this.$nextTick(()=>{this.scrollToPosition(e)})},beforeUnmount(){this.removeListeners()},methods:{addView(e,o,l,n,r){const a=t.markRaw({id:$++,index:o,used:!0,key:n,type:r}),i=t.shallowReactive({item:l,position:0,nr:a});return e.push(i),i},unuseView(e,t=!1){const o=this.$_unusedViews,l=e.nr.type;let n=o.get(l);n||(n=[],o.set(l,n)),n.push(e),t||(e.nr.used=!1,e.position=-9999)},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){if(!this.$_scrollDirty){if(this.$_scrollDirty=!0,this.$_updateTimeout)return;const e=()=>requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:e}=this.updateVisibleItems(!1,!0);e||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,this.updateInterval+100))});e(),this.updateInterval&&(this.$_updateTimeout=setTimeout(()=>{this.$_updateTimeout=0,this.$_scrollDirty&&e()},this.updateInterval))}},handleVisibilityChange(e,t){this.ready&&(e||0!==t.boundingClientRect.width||0!==t.boundingClientRect.height?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,t=!1){const o=this.itemSize,l=this.gridItems||1,n=this.itemSecondarySize||o,r=this.$_computedMinItemSize,a=this.typeField,i=this.simpleArray?null:this.keyField,s=this.items,c=s.length,d=this.sizes,u=this.$_views,p=this.$_unusedViews,h=this.pool,m=this.itemIndexByKey;let g,f,v,w,y,b;if(c)if(this.$_prerender)g=w=0,f=y=Math.min(this.prerender,s.length),v=null;else{const e=this.getScroll();if(t){let t=e.start-this.$_lastUpdateScrollPosition;if(t<0&&(t=-t),null===o&&t<r||t<o)return{continuous:!0}}this.$_lastUpdateScrollPosition=e.start;const n=this.buffer;e.start-=n,e.end+=n;let a=0;if(this.$refs.before&&(a=this.$refs.before.scrollHeight,e.start-=a),this.$refs.after){const t=this.$refs.after.scrollHeight;e.end+=t}if(null===o){let t,o,l=0,n=c-1,r=~~(c/2);do{o=r,t=d[r].accumulator,t<e.start?l=r:r<c-1&&d[r+1].accumulator>e.start&&(n=r),r=~~((l+n)/2)}while(r!==o);for(r<0&&(r=0),g=r,v=d[c-1].accumulator,f=r;f<c&&d[f].accumulator<e.end;f++);for(-1===f?f=s.length-1:(f++,f>c&&(f=c)),w=g;w<c&&a+d[w].accumulator<e.start;w++);for(y=w;y<c&&a+d[y].accumulator<e.end;y++);}else{g=~~(e.start/o*l);g-=g%l,f=Math.ceil(e.end/o*l),w=Math.max(0,Math.floor((e.start-a)/o*l)),y=Math.floor((e.end-a)/o*l),g<0&&(g=0),f>c&&(f=c),w<0&&(w=0),y>c&&(y=c),v=Math.ceil(c/l)*o}}else g=f=w=y=v=0;f-g>C&&this.itemsLimitError(),this.totalSize=v;const k=g<=this.$_endIndex&&f>=this.$_startIndex;if(k)for(let C=0,x=h.length;C<x;C++)b=h[C],b.nr.used&&(e&&(b.nr.index=m[b.item[i]]),(null==b.nr.index||b.nr.index<g||b.nr.index>=f)&&this.unuseView(b));const E=k?null:new Map;let S,R,N;for(let C=g;C<f;C++){S=s[C];const e=i?S[i]:S;if(null==e)throw new Error(`Key is ${e} on item (keyField is '${i}')`);if(b=u.get(e),!o&&!d[C].size){b&&this.unuseView(b);continue}R=S[a];let t=p.get(R),r=!1;if(b){if(!b.nr.used&&(b.nr.used=!0,r=!0,t)){const e=t.indexOf(b);-1!==e&&t.splice(e,1)}}else k?b=t&&t.length?t.pop():this.addView(h,C,S,e,R):(N=E.get(R)||0,(!t||N>=t.length)&&(b=this.addView(h,C,S,e,R),this.unuseView(b,!0),t=p.get(R)),b=t[N],E.set(R,N+1)),u.delete(b.nr.key),b.nr.used=!0,b.nr.index=C,b.nr.key=e,b.nr.type=R,u.set(e,b),r=!0;b.item=S,r&&(C===s.length-1&&this.$emit("scroll-end"),0===C&&this.$emit("scroll-start")),null===o?(b.position=d[C-1].accumulator,b.offset=0):(b.position=Math.floor(C/l)*o,b.offset=C%l*n)}return this.$_startIndex=g,this.$_endIndex=f,this.emitUpdate&&this.$emit("update",g,f,w,y),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,this.updateInterval+300),{continuous:k}},getListenerTarget(){let e=N(this.$el);return!window.document||e!==window.document.documentElement&&e!==window.document.body||(e=window),e},getScroll(){const{$el:e,direction:t}=this,o="vertical"===t;let l;if(this.pageMode){const t=e.getBoundingClientRect(),n=o?t.height:t.width;let r=-(o?t.top:t.left),a=o?window.innerHeight:window.innerWidth;r<0&&(a+=r,r=0),r+a>n&&(a=n-r),l={start:r,end:r+a}}else l=o?{start:e.scrollTop,end:e.scrollTop+e.clientHeight}:{start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return l},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,!!_&&{passive:!0}),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){this.listenerTarget&&(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let t;const o=this.gridItems||1;t=null===this.itemSize?e>0?this.sizes[e-1].accumulator:0:Math.floor(e/o)*this.itemSize,this.scrollToPosition(t)},scrollToPosition(e){const t="vertical"===this.direction?{scroll:"scrollTop",start:"top"}:{scroll:"scrollLeft",start:"left"};let o,l,n;if(this.pageMode){const r=N(this.$el),a="HTML"===r.tagName?0:r[t.scroll],i=r.getBoundingClientRect(),s=this.$el.getBoundingClientRect()[t.start]-i[t.start];o=r,l=t.scroll,n=e+a+s}else o=this.$el,l=t.scroll,n=e;o[l]=n},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,t)=>e.nr.index-t.nr.index)}}};const B={key:0,ref:"before",class:"vue-recycle-scroller__slot"},D={key:1,ref:"after",class:"vue-recycle-scroller__slot"};T.render=function(e,o,l,n,r,a){const i=t.resolveComponent("ResizeObserver"),s=t.resolveDirective("observe-visibility");return t.withDirectives((t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["vue-recycle-scroller",{ready:r.ready,"page-mode":l.pageMode,[`direction-${e.direction}`]:!0}]),onScrollPassive:o[0]||(o[0]=(...e)=>a.handleScroll&&a.handleScroll(...e))},[e.$slots.before?(t.openBlock(),t.createElementBlock("div",B,[t.renderSlot(e.$slots,"before")],512)):t.createCommentVNode("v-if",!0),(t.openBlock(),t.createBlock(t.resolveDynamicComponent(l.listTag),{ref:"wrapper",style:t.normalizeStyle({["vertical"===e.direction?"minHeight":"minWidth"]:r.totalSize+"px"}),class:t.normalizeClass(["vue-recycle-scroller__item-wrapper",l.listClass])},{default:t.withCtx(()=>[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(r.pool,o=>(t.openBlock(),t.createBlock(t.resolveDynamicComponent(l.itemTag),t.mergeProps({key:o.nr.id,style:r.ready?{transform:`translate${"vertical"===e.direction?"Y":"X"}(${o.position}px) translate${"vertical"===e.direction?"X":"Y"}(${o.offset}px)`,width:l.gridItems?`${"vertical"===e.direction&&l.itemSecondarySize||l.itemSize}px`:void 0,height:l.gridItems?`${"horizontal"===e.direction&&l.itemSecondarySize||l.itemSize}px`:void 0}:null,class:["vue-recycle-scroller__item-view",[l.itemClass,{hover:!l.skipHover&&r.hoverKey===o.nr.key}]]},t.toHandlers(l.skipHover?{}:{mouseenter:()=>{r.hoverKey=o.nr.key},mouseleave:()=>{r.hoverKey=null}})),{default:t.withCtx(()=>[t.renderSlot(e.$slots,"default",{item:o.item,index:o.nr.index,active:o.nr.used})]),_:2},1040,["style","class"]))),128)),t.renderSlot(e.$slots,"empty")]),_:3},8,["style","class"])),e.$slots.after?(t.openBlock(),t.createElementBlock("div",D,[t.renderSlot(e.$slots,"after")],512)):t.createCommentVNode("v-if",!0),t.createVNode(i,{onNotify:a.handleResize},null,8,["onNotify"])],34)),[[s,a.handleVisibilityChange]])},T.__file="src/components/RecycleScroller.vue";var z={name:"DynamicScroller",components:{RecycleScroller:T},provide(){return"undefined"!=typeof ResizeObserver&&(this.$_resizeObserver=new ResizeObserver(e=>{requestAnimationFrame(()=>{if(Array.isArray(e))for(const t of e)if(t.target&&t.target.$_vs_onResize){let e,o;if(t.borderBoxSize){const l=t.borderBoxSize[0];e=l.inlineSize,o=l.blockSize}else e=t.contentRect.width,o=t.contentRect.height;t.target.$_vs_onResize(t.target.$_vs_id,e,o)}})})),{vscrollData:this.vscrollData,vscrollParent:this,vscrollResizeObserver:this.$_resizeObserver}},inheritAttrs:!1,props:{...I,minItemSize:{type:[Number,String],required:!0}},emits:["resize","visible"],data(){return{vscrollData:{active:!0,sizes:{},keyField:this.keyField,simpleArray:!1}}},computed:{simpleArray:V,itemsWithSize(){const e=[],{items:t,keyField:o,simpleArray:l}=this,n=this.vscrollData.sizes,r=t.length;for(let a=0;a<r;a++){const r=t[a],i=l?a:r[o];let s=n[i];void 0!==s||this.$_undefinedMap[i]||(s=0),e.push({item:r,id:i,size:s})}return e}},watch:{items(){this.forceUpdate()},simpleArray:{handler(e){this.vscrollData.simpleArray=e},immediate:!0},direction(e){this.forceUpdate(!0)},itemsWithSize(e,t){const o=this.$el.scrollTop;let l=0,n=0;const r=Math.min(e.length,t.length);for(let i=0;i<r&&!(l>=o);i++)l+=t[i].size||this.minItemSize,n+=e[i].size||this.minItemSize;const a=n-l;0!==a&&(this.$el.scrollTop+=a)}},beforeCreate(){var e;this.$_updates=[],this.$_undefinedSizes=0,this.$_undefinedMap={},this.$_events={all:e=e||new Map,on:function(t,o){var l=e.get(t);l&&l.push(o)||e.set(t,[o])},off:function(t,o){var l=e.get(t);l&&l.splice(l.indexOf(o)>>>0,1)},emit:function(t,o){(e.get(t)||[]).slice().map(function(e){e(o)}),(e.get("*")||[]).slice().map(function(e){e(t,o)})}}},activated(){this.vscrollData.active=!0},deactivated(){this.vscrollData.active=!1},unmounted(){this.$_events.all.clear()},methods:{onScrollerResize(){this.$refs.scroller&&this.forceUpdate(),this.$emit("resize")},onScrollerVisible(){this.$_events.emit("vscroll:update",{force:!1}),this.$emit("visible")},forceUpdate(e=!1){(e||this.simpleArray)&&(this.vscrollData.sizes={}),this.$_events.emit("vscroll:update",{force:!0})},scrollToItem(e){const t=this.$refs.scroller;t&&t.scrollToItem(e)},getItemSize(e,t=void 0){const o=this.simpleArray?null!=t?t:this.items.indexOf(e):e[this.keyField];return this.vscrollData.sizes[o]||0},scrollToBottom(){if(this.$_scrollingToBottom)return;this.$_scrollingToBottom=!0;const e=this.$el;this.$nextTick(()=>{e.scrollTop=e.scrollHeight+5e3;const t=()=>{e.scrollTop=e.scrollHeight+5e3,requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight+5e3,0===this.$_undefinedSizes?this.$_scrollingToBottom=!1:requestAnimationFrame(t)})};requestAnimationFrame(t)})}}};z.render=function(e,o,l,n,r,a){const i=t.resolveComponent("RecycleScroller");return t.openBlock(),t.createBlock(i,t.mergeProps({ref:"scroller",items:a.itemsWithSize,"min-item-size":l.minItemSize,direction:e.direction,"key-field":"id","list-tag":e.listTag,"item-tag":e.itemTag},e.$attrs,{onResize:a.onScrollerResize,onVisible:a.onScrollerVisible}),{default:t.withCtx(({item:o,index:l,active:n})=>[t.renderSlot(e.$slots,"default",t.normalizeProps(t.guardReactiveProps({item:o.item,index:l,active:n,itemWithSize:o})))]),before:t.withCtx(()=>[t.renderSlot(e.$slots,"before")]),after:t.withCtx(()=>[t.renderSlot(e.$slots,"after")]),empty:t.withCtx(()=>[t.renderSlot(e.$slots,"empty")]),_:3},16,["items","min-item-size","direction","list-tag","item-tag","onResize","onVisible"])},z.__file="src/components/DynamicScroller.vue";var O={name:"DynamicScrollerItem",inject:["vscrollData","vscrollParent","vscrollResizeObserver"],props:{item:{required:!0},watchData:{type:Boolean,default:!1},active:{type:Boolean,required:!0},index:{type:Number,default:void 0},sizeDependencies:{type:[Array,Object],default:null},emitResize:{type:Boolean,default:!1},tag:{type:String,default:"div"}},emits:["resize"],computed:{id(){if(this.vscrollData.simpleArray)return this.index;if(this.vscrollData.keyField in this.item)return this.item[this.vscrollData.keyField];throw new Error(`keyField '${this.vscrollData.keyField}' not found in your item. You should set a valid keyField prop on your Scroller`)},size(){return this.vscrollData.sizes[this.id]||0},finalActive(){return this.active&&this.vscrollData.active}},watch:{watchData:"updateWatchData",id(e,t){if(this.$el.$_vs_id=this.id,this.size||this.onDataUpdate(),this.$_sizeObserved){const o=this.vscrollData.sizes[t],l=this.vscrollData.sizes[e];null!=o&&o!==l&&this.applySize(o)}},finalActive(e){this.size||(e?this.vscrollParent.$_undefinedMap[this.id]||(this.vscrollParent.$_undefinedSizes++,this.vscrollParent.$_undefinedMap[this.id]=!0):this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=!1)),this.vscrollResizeObserver?e?this.observeSize():this.unobserveSize():e&&this.$_pendingVScrollUpdate===this.id&&this.updateSize()}},created(){if(!this.$isServer&&(this.$_forceNextVScrollUpdate=null,this.updateWatchData(),!this.vscrollResizeObserver)){for(const e in this.sizeDependencies)this.$watch(()=>this.sizeDependencies[e],this.onDataUpdate);this.vscrollParent.$_events.on("vscroll:update",this.onVscrollUpdate)}},mounted(){this.finalActive&&(this.updateSize(),this.observeSize())},beforeUnmount(){this.vscrollParent.$_events.off("vscroll:update",this.onVscrollUpdate),this.unobserveSize()},methods:{updateSize(){this.finalActive?this.$_pendingSizeUpdate!==this.id&&(this.$_pendingSizeUpdate=this.id,this.$_forceNextVScrollUpdate=null,this.$_pendingVScrollUpdate=null,this.computeSize(this.id)):this.$_forceNextVScrollUpdate=this.id},updateWatchData(){this.watchData&&!this.vscrollResizeObserver?this.$_watchData=this.$watch("item",()=>{this.onDataUpdate()},{deep:!0}):this.$_watchData&&(this.$_watchData(),this.$_watchData=null)},onVscrollUpdate({force:e}){!this.finalActive&&e&&(this.$_pendingVScrollUpdate=this.id),this.$_forceNextVScrollUpdate!==this.id&&!e&&this.size||this.updateSize()},onDataUpdate(){this.updateSize()},computeSize(e){this.$nextTick(()=>{if(this.id===e){const e=this.$el.offsetWidth,t=this.$el.offsetHeight;this.applyWidthHeight(e,t)}this.$_pendingSizeUpdate=null})},applyWidthHeight(e,t){const o=~~("vertical"===this.vscrollParent.direction?t:e);o&&this.size!==o&&this.applySize(o)},applySize(e){this.vscrollParent.$_undefinedMap[this.id]&&(this.vscrollParent.$_undefinedSizes--,this.vscrollParent.$_undefinedMap[this.id]=void 0),this.vscrollData.sizes[this.id]=e,this.emitResize&&this.$emit("resize",this.id)},observeSize(){this.vscrollResizeObserver&&(this.$_sizeObserved||(this.vscrollResizeObserver.observe(this.$el),this.$el.$_vs_id=this.id,this.$el.$_vs_onResize=this.onResize,this.$_sizeObserved=!0))},unobserveSize(){this.vscrollResizeObserver&&this.$_sizeObserved&&(this.vscrollResizeObserver.unobserve(this.$el),this.$el.$_vs_onResize=void 0,this.$_sizeObserved=!1)},onResize(e,t,o){this.id===e&&this.applyWidthHeight(t,o)}},render(){return t.h(this.tag,this.$slots.default())}};function F(e,t,o){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,o),o):(e[t]=o,o)}function H(e,t){Array.isArray(e)?e.splice(t,1):delete e[t]}function P(){return"undefined"!=typeof navigator&&"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:{}}O.__file="src/components/DynamicScrollerItem.vue";const M="function"==typeof Proxy;let L,G,U;function j(){return void 0!==L||("undefined"!=typeof window&&window.performance?(L=!0,G=window.performance):"undefined"!=typeof globalThis&&(null===(e=globalThis.perf_hooks)||void 0===e?void 0:e.performance)?(L=!0,G=globalThis.perf_hooks.performance):L=!1),L?G.now():Date.now();var e}class W{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const o={};if(e.settings)for(const r in e.settings){const t=e.settings[r];o[r]=t.defaultValue}const l=`__vue-devtools-plugin-settings__${e.id}`;let n=Object.assign({},o);try{const e=localStorage.getItem(l),t=JSON.parse(e);Object.assign(n,t)}catch(sl){}this.fallbacks={getSettings:()=>n,setSettings(e){try{localStorage.setItem(l,JSON.stringify(e))}catch(sl){}n=e},now:()=>j()},t&&t.on("plugin:settings:set",(e,t)=>{e===this.plugin.id&&this.fallbacks.setSettings(t)}),this.proxiedOn=new Proxy({},{get:(e,t)=>this.target?this.target.on[t]:(...e)=>{this.onQueue.push({method:t,args:e})}}),this.proxiedTarget=new Proxy({},{get:(e,t)=>this.target?this.target[t]:"on"===t?this.proxiedOn:Object.keys(this.fallbacks).includes(t)?(...e)=>(this.targetQueue.push({method:t,args:e,resolve:()=>{}}),this.fallbacks[t](...e)):(...e)=>new Promise(o=>{this.targetQueue.push({method:t,args:e,resolve:o})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function q(e,t){const o=e,l=P(),n=P().__VUE_DEVTOOLS_GLOBAL_HOOK__,r=M&&o.enableEarlyProxy;if(!n||!l.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&r){const e=r?new W(o,n):null;(l.__VUE_DEVTOOLS_PLUGINS__=l.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:o,setupFn:t,proxy:e}),e&&t(e.proxiedTarget)}else n.emit("devtools-plugin:setup",e,t)}
/*!
   * pinia v2.3.1
   * (c) 2025 Eduardo San Martin Morote
   * @license MIT
   */const K=e=>U=e,J="production"!==process.env.NODE_ENV?Symbol("pinia"):Symbol();function Q(e){return e&&"object"==typeof e&&"[object Object]"===Object.prototype.toString.call(e)&&"function"!=typeof e.toJSON}var Y,X;(X=Y||(Y={})).direct="direct",X.patchObject="patch object",X.patchFunction="patch function";const Z="undefined"!=typeof window,ee=(()=>"object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:"object"==typeof globalThis?globalThis:{HTMLElement:null})();function te(e,t,o){const l=new XMLHttpRequest;l.open("GET",e),l.responseType="blob",l.onload=function(){ae(l.response,t,o)},l.onerror=function(){console.error("could not download file")},l.send()}function oe(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(sl){}return t.status>=200&&t.status<=299}function le(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(sl){const o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(o)}}const ne="object"==typeof navigator?navigator:{userAgent:""},re=(()=>/Macintosh/.test(ne.userAgent)&&/AppleWebKit/.test(ne.userAgent)&&!/Safari/.test(ne.userAgent))(),ae=Z?"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype&&!re?function(e,t="download",o){const l=document.createElement("a");l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin!==location.origin?oe(l.href)?te(e,t,o):(l.target="_blank",le(l)):le(l)):(l.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(l.href)},4e4),setTimeout(function(){le(l)},0))}:"msSaveOrOpenBlob"in ne?function(e,t="download",o){if("string"==typeof e)if(oe(e))te(e,t,o);else{const t=document.createElement("a");t.href=e,t.target="_blank",setTimeout(function(){le(t)})}else navigator.msSaveOrOpenBlob(function(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,o),t)}:function(e,t,o,l){(l=l||open("","_blank"))&&(l.document.title=l.document.body.innerText="downloading...");if("string"==typeof e)return te(e,t,o);const n="application/octet-stream"===e.type,r=/constructor/i.test(String(ee.HTMLElement))||"safari"in ee,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||n&&r||re)&&"undefined"!=typeof FileReader){const t=new FileReader;t.onloadend=function(){let e=t.result;if("string"!=typeof e)throw l=null,new Error("Wrong reader.result type");e=a?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=e:location.assign(e),l=null},t.readAsDataURL(e)}else{const t=URL.createObjectURL(e);l?l.location.assign(t):location.href=t,l=null,setTimeout(function(){URL.revokeObjectURL(t)},4e4)}}:()=>{};function ie(e,t){const o="ðŸ "+e;"function"==typeof __VUE_DEVTOOLS_TOAST__?__VUE_DEVTOOLS_TOAST__(o,t):"error"===t?console.error(o):"warn"===t?console.warn(o):console.log(o)}function se(e){return"_a"in e&&"install"in e}function ce(){if(!("clipboard"in navigator))return ie("Your browser doesn't support the Clipboard API","error"),!0}function de(e){return!!(e instanceof Error&&e.message.toLowerCase().includes("document is not focused"))&&(ie('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0)}let ue;async function pe(e){try{const t=(ue||(ue=document.createElement("input"),ue.type="file",ue.accept=".json"),function(){return new Promise((e,t)=>{ue.onchange=async()=>{const t=ue.files;if(!t)return e(null);const o=t.item(0);return e(o?{text:await o.text(),file:o}:null)},ue.oncancel=()=>e(null),ue.onerror=t,ue.click()})}),o=await t();if(!o)return;const{text:l,file:n}=o;he(e,JSON.parse(l)),ie(`Global state imported from "${n.name}".`)}catch(t){ie("Failed to import the state from JSON. Check the console for more details.","error"),console.error(t)}}function he(e,t){for(const o in t){const l=e.state.value[o];l?Object.assign(l,t[o]):e.state.value[o]=t[o]}}function me(e){return{_custom:{display:e}}}const ge="ðŸ Pinia (root)",fe="_root";function ve(e){return se(e)?{id:fe,label:ge}:{id:e.$id,label:e.$id}}function we(e){return e?Array.isArray(e)?e.reduce((e,t)=>(e.keys.push(t.key),e.operations.push(t.type),e.oldValue[t.key]=t.oldValue,e.newValue[t.key]=t.newValue,e),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:me(e.type),key:me(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function ye(e){switch(e){case Y.direct:return"mutation";case Y.patchFunction:case Y.patchObject:return"$patch";default:return"unknown"}}let be=!0;const Ce=[],ke="pinia:mutations",Ee="pinia",{assign:Se}=Object,Re=e=>"ðŸ "+e;function Ne(e,o){q({id:"dev.esm.pinia",label:"Pinia ðŸ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Ce,app:e},l=>{"function"!=typeof l.now&&ie("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),l.addTimelineLayer({id:ke,label:"Pinia ðŸ",color:15064968}),l.addInspector({id:Ee,label:"Pinia ðŸ",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{!async function(e){if(!ce())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),ie("Global state copied to clipboard.")}catch(t){if(de(t))return;ie("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}(o)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await async function(e){if(!ce())try{he(e,JSON.parse(await navigator.clipboard.readText())),ie("Global state pasted from clipboard.")}catch(t){if(de(t))return;ie("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}(o),l.sendInspectorTree(Ee),l.sendInspectorState(Ee)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{!async function(e){try{ae(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){ie("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}(o)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await pe(o),l.sendInspectorTree(Ee),l.sendInspectorState(Ee)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:'Reset the state (with "$reset")',action:e=>{const t=o._s.get(e);t?"function"!=typeof t.$reset?ie(`Cannot reset "${e}" store because it doesn't have a "$reset" method implemented.`,"warn"):(t.$reset(),ie(`Store "${e}" reset.`)):ie(`Cannot reset "${e}" store because it wasn't found.`,"warn")}}]}),l.on.inspectComponent((e,o)=>{const l=e.componentInstance&&e.componentInstance.proxy;if(l&&l._pStores){const o=e.componentInstance.proxy._pStores;Object.values(o).forEach(o=>{e.instanceData.state.push({type:Re(o.$id),key:"state",editable:!0,value:o._isOptionsAPI?{_custom:{value:t.toRaw(o.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>o.$reset()}]}}:Object.keys(o.$state).reduce((e,t)=>(e[t]=o.$state[t],e),{})}),o._getters&&o._getters.length&&e.instanceData.state.push({type:Re(o.$id),key:"getters",editable:!1,value:o._getters.reduce((e,t)=>{try{e[t]=o[t]}catch(l){e[t]=l}return e},{})})})}}),l.on.getInspectorTree(t=>{if(t.app===e&&t.inspectorId===Ee){let e=[o];e=e.concat(Array.from(o._s.values())),t.rootNodes=(t.filter?e.filter(e=>"$id"in e?e.$id.toLowerCase().includes(t.filter.toLowerCase()):ge.toLowerCase().includes(t.filter.toLowerCase())):e).map(ve)}}),globalThis.$pinia=o,l.on.getInspectorState(l=>{if(l.app===e&&l.inspectorId===Ee){const e=l.nodeId===fe?o:o._s.get(l.nodeId);if(!e)return;e&&(l.nodeId!==fe&&(globalThis.$store=t.toRaw(e)),l.state=function(e){if(se(e)){const t=Array.from(e._s.keys()),o=e._s;return{state:t.map(t=>({editable:!0,key:t,value:e.state.value[t]})),getters:t.filter(e=>o.get(e)._getters).map(e=>{const t=o.get(e);return{editable:!1,key:e,value:t._getters.reduce((e,o)=>(e[o]=t[o],e),{})}})}}const t={state:Object.keys(e.$state).map(t=>({editable:!0,key:t,value:e.$state[t]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(t=>({editable:!1,key:t,value:e[t]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(t=>({editable:!0,key:t,value:e[t]}))),t}(e))}}),l.on.editInspectorState((t,l)=>{if(t.app===e&&t.inspectorId===Ee){const e=t.nodeId===fe?o:o._s.get(t.nodeId);if(!e)return ie(`store "${t.nodeId}" not found`,"error");const{path:l}=t;se(e)?l.unshift("state"):1===l.length&&e._customProperties.has(l[0])&&!(l[0]in e.$state)||l.unshift("$state"),be=!1,t.set(e,l,t.state.value),be=!0}}),l.on.editComponentState(e=>{if(e.type.startsWith("ðŸ")){const t=e.type.replace(/^ðŸ\s*/,""),l=o._s.get(t);if(!l)return ie(`store "${t}" not found`,"error");const{path:n}=e;if("state"!==n[0])return ie(`Invalid path for store "${t}":\n${n}\nOnly state can be modified.`);n[0]="$state",be=!1,e.set(l,n,e.state.value),be=!0}})})}let xe,Ie=0;function Ve(e,o,l){const n=o.reduce((o,l)=>(o[l]=t.toRaw(e)[l],o),{});for(const t in n)e[t]=function(){const o=Ie,r=l?new Proxy(e,{get:(...e)=>(xe=o,Reflect.get(...e)),set:(...e)=>(xe=o,Reflect.set(...e))}):e;xe=o;const a=n[t].apply(r,arguments);return xe=void 0,a}}function _e({app:e,store:o,options:l}){if(!o.$id.startsWith("__hot:")){if(o._isOptionsAPI=!!l.state,!o._p._testing){Ve(o,Object.keys(l.actions),o._isOptionsAPI);const e=o._hotUpdate;t.toRaw(o)._hotUpdate=function(t){e.apply(this,arguments),Ve(o,Object.keys(t._hmrPayload.actions),!!o._isOptionsAPI)}}!function(e,o){Ce.includes(Re(o.$id))||Ce.push(Re(o.$id)),q({id:"dev.esm.pinia",label:"Pinia ðŸ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Ce,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},e=>{const l="function"==typeof e.now?e.now.bind(e):Date.now;o.$onAction(({after:t,onError:n,name:r,args:a})=>{const i=Ie++;e.addTimelineEvent({layerId:ke,event:{time:l(),title:"ðŸ›« "+r,subtitle:"start",data:{store:me(o.$id),action:me(r),args:a},groupId:i}}),t(t=>{xe=void 0,e.addTimelineEvent({layerId:ke,event:{time:l(),title:"ðŸ›¬ "+r,subtitle:"end",data:{store:me(o.$id),action:me(r),args:a,result:t},groupId:i}})}),n(t=>{xe=void 0,e.addTimelineEvent({layerId:ke,event:{time:l(),logType:"error",title:"ðŸ’¥ "+r,subtitle:"end",data:{store:me(o.$id),action:me(r),args:a,error:t},groupId:i}})})},!0),o._customProperties.forEach(n=>{t.watch(()=>t.unref(o[n]),(t,o)=>{e.notifyComponentUpdate(),e.sendInspectorState(Ee),be&&e.addTimelineEvent({layerId:ke,event:{time:l(),title:"Change",subtitle:n,data:{newValue:t,oldValue:o},groupId:xe}})},{deep:!0})}),o.$subscribe(({events:t,type:n},r)=>{if(e.notifyComponentUpdate(),e.sendInspectorState(Ee),!be)return;const a={time:l(),title:ye(n),data:Se({store:me(o.$id)},we(t)),groupId:xe};n===Y.patchFunction?a.subtitle="â¤µï¸":n===Y.patchObject?a.subtitle="ðŸ§©":t&&!Array.isArray(t)&&(a.subtitle=t.type),t&&(a.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:t}}),e.addTimelineEvent({layerId:ke,event:a})},{detached:!0,flush:"sync"});const n=o._hotUpdate;o._hotUpdate=t.markRaw(t=>{n(t),e.addTimelineEvent({layerId:ke,event:{time:l(),title:"ðŸ”¥ "+o.$id,subtitle:"HMR update",data:{store:me(o.$id),info:me("HMR update")}}}),e.notifyComponentUpdate(),e.sendInspectorTree(Ee),e.sendInspectorState(Ee)});const{$dispose:r}=o;o.$dispose=()=>{r(),e.notifyComponentUpdate(),e.sendInspectorTree(Ee),e.sendInspectorState(Ee),e.getSettings().logStoreChanges&&ie(`Disposed "${o.$id}" store ðŸ—‘`)},e.notifyComponentUpdate(),e.sendInspectorTree(Ee),e.sendInspectorState(Ee),e.getSettings().logStoreChanges&&ie(`"${o.$id}" store installed ðŸ†•`)})}(e,o)}}function Ae(e,o){for(const l in o){const n=o[l];if(!(l in e))continue;const r=e[l];Q(r)&&Q(n)&&!t.isRef(n)&&!t.isReactive(n)?e[l]=Ae(r,n):e[l]=n}return e}const $e=()=>{};function Te(e,o,l,n=$e){e.push(o);const r=()=>{const t=e.indexOf(o);t>-1&&(e.splice(t,1),n())};return!l&&t.getCurrentScope()&&t.onScopeDispose(r),r}function Be(e,...t){e.slice().forEach(e=>{e(...t)})}const De=e=>e(),ze=Symbol(),Oe=Symbol();function Fe(e,o){e instanceof Map&&o instanceof Map?o.forEach((t,o)=>e.set(o,t)):e instanceof Set&&o instanceof Set&&o.forEach(e.add,e);for(const l in o){if(!o.hasOwnProperty(l))continue;const n=o[l],r=e[l];Q(r)&&Q(n)&&e.hasOwnProperty(l)&&!t.isRef(n)&&!t.isReactive(n)?e[l]=Fe(r,n):e[l]=n}return e}const He="production"!==process.env.NODE_ENV?Symbol("pinia:skipHydration"):Symbol();function Pe(e){return!Q(e)||!e.hasOwnProperty(He)}const{assign:Me}=Object;function Le(e){return!(!t.isRef(e)||!e.effect)}function Ge(e,o,l,n){const{state:r,actions:a,getters:i}=o,s=l.state.value[e];let c;return c=Ue(e,function(){s||"production"!==process.env.NODE_ENV&&n||(l.state.value[e]=r?r():{});const o="production"!==process.env.NODE_ENV&&n?t.toRefs(t.ref(r?r():{}).value):t.toRefs(l.state.value[e]);return Me(o,a,Object.keys(i||{}).reduce((n,r)=>("production"!==process.env.NODE_ENV&&r in o&&console.warn(`[ðŸ]: A getter cannot have the same name as another state property. Rename one of them. Found with "${r}" in store "${e}".`),n[r]=t.markRaw(t.computed(()=>{K(l);const t=l._s.get(e);return i[r].call(t,t)})),n),{}))},o,l,n,!0),c}function Ue(e,o,l={},n,r,a){let i;const s=Me({actions:{}},l);if("production"!==process.env.NODE_ENV&&!n._e.active)throw new Error("Pinia destroyed");const c={deep:!0};let d,u;"production"!==process.env.NODE_ENV&&(c.onTrigger=e=>{d?p=e:0!=d||E._hotUpdating||(Array.isArray(p)?p.push(e):console.error("ðŸ debuggerEvents should be an array. This is most likely an internal Pinia bug."))});let p,h=[],m=[];const g=n.state.value[e];a||g||"production"!==process.env.NODE_ENV&&r||(n.state.value[e]={});const f=t.ref({});let v;function w(o){let l;d=u=!1,"production"!==process.env.NODE_ENV&&(p=[]),"function"==typeof o?(o(n.state.value[e]),l={type:Y.patchFunction,storeId:e,events:p}):(Fe(n.state.value[e],o),l={type:Y.patchObject,payload:o,storeId:e,events:p});const r=v=Symbol();t.nextTick().then(()=>{v===r&&(d=!0)}),u=!0,Be(h,l,n.state.value[e])}const y=a?function(){const{state:e}=l,t=e?e():{};this.$patch(e=>{Me(e,t)})}:"production"!==process.env.NODE_ENV?()=>{throw new Error(`ðŸ: Store "${e}" is built using the setup syntax and does not implement $reset().`)}:$e;const b=(t,o="")=>{if(ze in t)return t[Oe]=o,t;const l=function(){K(n);const o=Array.from(arguments),r=[],a=[];let i;Be(m,{args:o,name:l[Oe],store:E,after:function(e){r.push(e)},onError:function(e){a.push(e)}});try{i=t.apply(this&&this.$id===e?this:E,o)}catch(s){throw Be(a,s),s}return i instanceof Promise?i.then(e=>(Be(r,e),e)).catch(e=>(Be(a,e),Promise.reject(e))):(Be(r,i),i)};return l[ze]=!0,l[Oe]=o,l},C=t.markRaw({actions:{},getters:{},state:[],hotState:f}),k={_p:n,$id:e,$onAction:Te.bind(null,m),$patch:w,$reset:y,$subscribe(o,l={}){const r=Te(h,o,l.detached,()=>a()),a=i.run(()=>t.watch(()=>n.state.value[e],t=>{("sync"===l.flush?u:d)&&o({storeId:e,type:Y.direct,events:p},t)},Me({},c,l)));return r},$dispose:function(){i.stop(),h=[],m=[],n._s.delete(e)}},E=t.reactive("production"!==process.env.NODE_ENV||"production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV&&Z?Me({_hmrPayload:C,_customProperties:t.markRaw(new Set)},k):k);n._s.set(e,E);const S=(n._a&&n._a.runWithContext||De)(()=>n._e.run(()=>(i=t.effectScope()).run(()=>o({action:b}))));for(const R in S){const o=S[R];if(t.isRef(o)&&!Le(o)||t.isReactive(o))"production"!==process.env.NODE_ENV&&r?F(f.value,R,t.toRef(S,R)):a||(g&&Pe(o)&&(t.isRef(o)?o.value=g[R]:Fe(o,g[R])),n.state.value[e][R]=o),"production"!==process.env.NODE_ENV&&C.state.push(R);else if("function"==typeof o){const e="production"!==process.env.NODE_ENV&&r?o:b(o,R);S[R]=e,"production"!==process.env.NODE_ENV&&(C.actions[R]=o),s.actions[R]=o}else if("production"!==process.env.NODE_ENV&&Le(o)&&(C.getters[R]=a?l.getters[R]:o,Z)){(S._getters||(S._getters=t.markRaw([]))).push(R)}}if(Me(E,S),Me(t.toRaw(E),S),Object.defineProperty(E,"$state",{get:()=>"production"!==process.env.NODE_ENV&&r?f.value:n.state.value[e],set:e=>{if("production"!==process.env.NODE_ENV&&r)throw new Error("cannot set hotState");w(t=>{Me(t,e)})}}),"production"!==process.env.NODE_ENV&&(E._hotUpdate=t.markRaw(o=>{E._hotUpdating=!0,o._hmrPayload.state.forEach(e=>{if(e in E.$state){const t=o.$state[e],l=E.$state[e];"object"==typeof t&&Q(t)&&Q(l)?Ae(t,l):o.$state[e]=l}F(E,e,t.toRef(o.$state,e))}),Object.keys(E.$state).forEach(e=>{e in o.$state||H(E,e)}),d=!1,u=!1,n.state.value[e]=t.toRef(o._hmrPayload,"hotState"),u=!0,t.nextTick().then(()=>{d=!0});for(const e in o._hmrPayload.actions){const t=o[e];F(E,e,b(t,e))}for(const e in o._hmrPayload.getters){const l=o._hmrPayload.getters[e],r=a?t.computed(()=>(K(n),l.call(E,E))):l;F(E,e,r)}Object.keys(E._hmrPayload.getters).forEach(e=>{e in o._hmrPayload.getters||H(E,e)}),Object.keys(E._hmrPayload.actions).forEach(e=>{e in o._hmrPayload.actions||H(E,e)}),E._hmrPayload=o._hmrPayload,E._getters=o._getters,E._hotUpdating=!1})),"production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV&&Z){const e={writable:!0,configurable:!0,enumerable:!1};["_p","_hmrPayload","_getters","_customProperties"].forEach(t=>{Object.defineProperty(E,t,Me({value:E[t]},e))})}return n._p.forEach(e=>{if("production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV&&Z){const t=i.run(()=>e({store:E,app:n._a,pinia:n,options:s}));Object.keys(t||{}).forEach(e=>E._customProperties.add(e)),Me(E,t)}else Me(E,i.run(()=>e({store:E,app:n._a,pinia:n,options:s})))}),"production"!==process.env.NODE_ENV&&E.$state&&"object"==typeof E.$state&&"function"==typeof E.$state.constructor&&!E.$state.constructor.toString().includes("[native code]")&&console.warn(`[ðŸ]: The "state" must be a plain object. It cannot be\n\tstate: () => new MyClass()\nFound in store "${E.$id}".`),g&&a&&l.hydrate&&l.hydrate(E.$state,g),d=!0,u=!0,E}
/*! #__NO_SIDE_EFFECTS__ */function je(e,o,l){let n,r;const a="function"==typeof o;if("string"==typeof e)n=e,r=a?l:o;else if(r=e,n=e.id,"production"!==process.env.NODE_ENV&&"string"!=typeof n)throw new Error('[ðŸ]: "defineStore()" must be passed a store id as its first argument.');function i(e,l){const s=t.hasInjectionContext();if((e=("test"===process.env.NODE_ENV&&U&&U._testing?null:e)||(s?t.inject(J,null):null))&&K(e),"production"!==process.env.NODE_ENV&&!U)throw new Error('[ðŸ]: "getActivePinia()" was called but there was no active Pinia. Are you trying to use a store before calling "app.use(pinia)"?\nSee https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.\nThis will fail in production.');(e=U)._s.has(n)||(a?Ue(n,o,r,e):Ge(n,r,e),"production"!==process.env.NODE_ENV&&(i._pinia=e));const c=e._s.get(n);if("production"!==process.env.NODE_ENV&&l){const t="__hot:"+n,i=a?Ue(t,o,r,e,!0):Ge(t,Me({},r),e,!0);l._hotUpdate(i),delete e.state.value[t],e._s.delete(t)}if("production"!==process.env.NODE_ENV&&Z){const e=t.getCurrentInstance();if(e&&e.proxy&&!l){const t=e.proxy;("_pStores"in t?t._pStores:t._pStores={})[n]=c}}return c}return i.$id=n,i}function We(){const e=t.ref(null);function o(e,t,l){return"simple"===t.type?function(e,t,o){let l;if("__checkbox"===t.columnName&&o)l=o.isRowChecked(e.rowId);else{const o=e.cells.find(e=>e.columnName===t.columnName);l=null==o?void 0:o.value}const n=t.value;switch(t.operator){case"Equals":return l===n;case"NotEquals":return l!==n;case"GreaterThan":return Number(l)>Number(n);case"LessThan":return Number(l)<Number(n);case"GreaterThanOrEquals":return Number(l)>=Number(n);case"LessThanOrEquals":return Number(l)<=Number(n);case"Contains":return String(l).toLowerCase().includes(String(n).toLowerCase());case"StartsWith":return String(l).toLowerCase().startsWith(String(n).toLowerCase());case"EndsWith":return String(l).toLowerCase().endsWith(String(n).toLowerCase());case"IsEmpty":return null==l||""===String(l).trim();case"IsNotEmpty":return null!=l&&""!==String(l).trim();default:return!0}}(e,t,l):function(e,t,l){if(!t.left||!t.right)return console.error("[evaluateCompositeFilter] Invalid filter structure - missing children:",t),!0;const n=o(e,t.left,l);if("AND"===t.operator&&!n)return!1;if("OR"===t.operator&&n)return!0;const r=o(e,t.right,l);return"AND"===t.operator?n&&r:n||r}(e,t,l)}return{currentFilter:e,filterRows:function(e,t,l){return t?e.filter(e=>o(e,t,l)):e},setFilter:function(t){e.value=t},clearFilter:function(){e.value=null},evaluateFilter:o}}function qe(e){const o=t.ref(""),l=t.ref("Contains"),n=t.ref([]),r=t.ref(-1);function a(e,t,o){return function(e,t){const o=[];for(let l=0;l<=t.length;l++)o[l]=[l];for(let l=0;l<=e.length;l++)o[0][l]=l;for(let l=1;l<=t.length;l++)for(let n=1;n<=e.length;n++)t.charAt(l-1)===e.charAt(n-1)?o[l][n]=o[l-1][n-1]:o[l][n]=Math.min(o[l-1][n-1]+1,o[l][n-1]+1,o[l-1][n]+1);return o[t.length][e.length]}(e.toLowerCase(),t.toLowerCase())<=o}return{searchTerm:o,searchMode:l,searchResults:n,currentResultIndex:r,searchInRows:function(t,o,l={}){if(!t)return n.value=[],void(r.value=-1);const i=[],s=l.caseSensitive??!1,c=l.fuzzyThreshold??3;for(const n of e.value)for(const e of n.cells){const l=String(e.value||"");let r=!1;const d=s?l:l.toLowerCase(),u=s?t:t.toLowerCase();switch(o){case"Exact":r=s?l===t:l.toLowerCase()===t.toLowerCase();break;case"Contains":r=d.includes(u);break;case"StartsWith":r=d.startsWith(u);break;case"EndsWith":r=d.endsWith(u);break;case"Regex":try{r=new RegExp(t,s?"":"i").test(l)}catch{r=!1}break;case"Fuzzy":r=a(l,t,c)}r&&i.push({rowId:n.rowId,columnName:e.columnName,value:l})}n.value=i,r.value=i.length>0?0:-1},goToNextResult:function(){r.value<n.value.length-1&&r.value++},goToPreviousResult:function(){r.value>0&&r.value--},clearSearch:function(){o.value="",n.value=[],r.value=-1},isSearchMatch:function(e,t){return n.value.some(o=>o.rowId===e&&o.columnName===t)}}}const Ke=new Map,Je=(e="dataGrid")=>{if(!e||"string"!=typeof e)throw console.error("[useDataGridStore] Invalid storeId:",e),new Error(`Invalid storeId: ${e}`);if(Ke.has(e))return console.log("[useDataGridStore] Using CACHED store definition for:",e),Ke.get(e);console.log("[useDataGridStore] Creating NEW store definition for:",e);const o=je(e,()=>{const e=t.ref(new Map),o=t.ref([]),l=t.ref([]),n=t.ref(new Set),r=t.ref([]),a=t.ref(100),i=t.ref(1),s=t.ref(new Map),c=t.ref([]),d=t.ref(null),u=t.ref(""),p=t.ref({pageSize:100,enableSort:!0,enableFilter:!0,enableSearch:!0,enableValidation:!0,autoValidate:!0,showRowNumber:!1,showCheckbox:!1,showValidationAlerts:!0,showDeleteButton:!1,showInsertButton:!1}),h=t.ref(null),m=t.ref(!1),g=t.ref(!1),f=t.ref(!1),v=t.ref(new Set),w=t.ref(new Set),y=t.ref(5),b=t.computed(()=>o.value.map(t=>e.value.get(t)).filter(Boolean)),C=t.computed(()=>c.value.map(e=>({columnName:e,direction:s.value.get(e).direction})));function k(t){return e.value.get(t)}const{filterRows:E,evaluateFilter:S}=We(),{searchResults:R,isSearchMatch:N}=qe(b),x=t.computed(()=>o.value.length),I=t.computed(()=>Math.ceil(x.value/a.value)),V=t.computed(()=>{let e=b.value;if(d.value){const t={checkedRows:r.value,isRowChecked:e=>r.value.includes(e)};e=E(e,d.value,t)}if(u.value&&R.value.length>0){const t=new Set(R.value.map(e=>e.rowId));e=e.filter(e=>t.has(e.rowId))}var t,o;C.value.length>0&&(t=e,e=0===(o=C.value).length?t:[...t].sort((e,t)=>{for(const{columnName:l,direction:n}of o){const o=e.cells.find(e=>e.columnName===l),r=t.cells.find(e=>e.columnName===l),a=$(null==o?void 0:o.value,null==r?void 0:r.value);if(0!==a)return"asc"===n?a:-a}return 0}));const l=(i.value-1)*a.value,n=l+a.value;return e.slice(l,n)});function _(e){const t=`empty-${T()}`;return{rowId:t,rowIndex:e,height:p.value.minRowHeight||25,cells:l.value.map(e=>({rowId:t,columnName:e.name,value:null,isSelected:!1,isValidationError:!1}))}}function A(){const t=o.value.length,l=y.value;if(t<l){const n=l-t;console.log(`[dataGridStore] ensureMinimumRows: Adding ${n} empty rows (current: ${t}, min: ${l})`);for(let l=0;l<n;l++){const n=_(t+l);e.value.set(n.rowId,n),o.value.push(n.rowId)}}}function $(e,t){return null==e&&null==t?0:null==e?-1:null==t?1:"number"==typeof e&&"number"==typeof t?e-t:String(e).localeCompare(String(t))}function T(){return`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}const B=t.computed(()=>{const e=r.value.length;return 0===e?"none":e===b.value.length?"all":"some"});function D(e,t){if(!h.value||!m.value)return;console.log("[dataGridStore] expandDragSelection:",{pressedCell:h.value,currentRowId:e,currentColumnName:t});const o=b.value.findIndex(e=>e.rowId===h.value.rowId),r=b.value.findIndex(t=>t.rowId===e);if(-1===o||-1===r)return;const a=l.value.filter(e=>!e.specialType||"ValidationAlerts"===e.specialType).map(e=>e.name);console.log("[dataGridStore] expandDragSelection: selectableColumns",{total:a.length,columns:a});const i=a.indexOf(h.value.columnName),s=a.indexOf(t);if(-1===i||-1===s)return void console.warn("[dataGridStore] expandDragSelection: column not found in selectableColumns",{pressedColumn:h.value.columnName,currentColumn:t,pressedColIndex:i,currentColIndex:s});const c=Math.min(o,r),d=Math.max(o,r),u=Math.min(i,s),p=Math.max(i,s);console.log("[dataGridStore] expandDragSelection: bounds",{rowRange:[c,d],colRange:[u,p],cellsToSelect:(d-c+1)*(p-u+1)}),n.value.clear();for(let l=c;l<=d;l++){const e=b.value[l].rowId;for(let t=u;t<=p;t++){const o=`${e}:${a[t]}`;n.value.add(o)}}console.log("[dataGridStore] expandDragSelection complete:",{selectedCellsCount:n.value.size})}const z=["__rowNumber","__checkbox","__validationAlerts","__deleteRow","__insertRow"];function O(e){const t=new Map;return e.map(e=>{const o=e.name,l=t.get(o)||0;return t.set(o,l+1),l>0?{...e,name:`${o}_${l+1}`}:e}).map((e,t,o)=>{const l=e.name.replace(/_\d+$/,"");return o.filter(e=>e.name===l||e.name.startsWith(`${l}_`)).length>1&&e.name===l?{...e,name:`${l}_1`}:e})}return{rows:b,columns:l,selectedCells:n,checkedRows:r,pageSize:a,currentPage:i,sortColumns:C,filterExpression:d,searchQuery:u,searchResults:R,config:p,pressedCell:h,isDragging:m,wasCtrlPressed:g,isAutoRowHeightEnabled:f,minRows:y,visibleRows:V,totalRows:x,totalPages:I,checkboxState:B,getRow:k,loadRows:function(t){var n;console.log("[dataGridStore] loadRows:",{originalRowCount:t.length,columnCount:l.value.length,autoValidate:p.value.autoValidate});const r=new Map,a=[],i=l.value.filter(e=>!e.specialType&&!1!==e.visibleForGrid);let s=0;t.forEach((e,t)=>{if(!i.some(t=>{const o=e[t.name];return null!=o&&""!==o}))return void s++;const o=e.__rowId||T(),n=e.__rowHeight||40,c={rowId:o,rowIndex:a.length,height:n,cells:l.value.map(t=>({rowId:o,columnName:t.name,value:e[t.name],isSelected:!1,isValidationError:!1}))};r.set(o,c),a.push(o)}),e.value=r,o.value=a,A(),console.log("[dataGridStore] loadRows complete:",{originalRows:t.length,loadedRows:o.value.length,skippedEmptyRows:s,filterRate:`${Math.round(s/t.length*100)}%`,minRowsRequired:y.value,firstRowId:o.value[0],firstRowCells:null==(n=r.get(o.value[0]))?void 0:n.cells.length})},updateCell:function(e,t,o){const l=k(e);if(l){const n=l.cells.find(e=>e.columnName===t);if(n){const l=n.value;n.value=o,console.log("[dataGridStore] updateCell:",{rowId:e,columnName:t,oldValue:l,newValue:o,autoValidate:p.value.autoValidate});const r=`${e}:${t}`;w.value.add(r)}else console.warn("[dataGridStore] updateCell: cell not found",{rowId:e,columnName:t})}else console.warn("[dataGridStore] updateCell: row not found",{rowId:e})},updateRowHeight:function(e,t){const o=k(e);if(o){const l=o.height;o.height=t,console.log("[dataGridStore] updateRowHeight:",{rowId:e,oldHeight:l,newHeight:t,autoRowHeightEnabled:f.value})}else console.warn("[dataGridStore] updateRowHeight: row not found",{rowId:e})},setAutoRowHeightEnabled:function(e){console.log(`[dataGridStore] setAutoRowHeightEnabled: oldValue=${f.value}, newValue=${e}`),f.value=e},addSort:function(e,t,o=!1){if(o)if(s.value.has(e)){const o=s.value.get(e);s.value.set(e,{direction:t,order:o.order})}else{const o=c.value.length+1;s.value.set(e,{direction:t,order:o}),c.value.push(e)}else s.value.clear(),c.value=[e],s.value.set(e,{direction:t,order:1})},clearSort:function(){s.value.clear(),c.value=[]},setSortColumns:function(e){s.value.clear(),c.value=[],e.forEach((e,t)=>{s.value.set(e.columnName,{direction:e.direction,order:t+1}),c.value.push(e.columnName)})},setPageSize:function(e){a.value=e,i.value=1},goToPage:function(e){e>=1&&e<=I.value&&(i.value=e)},deleteRow:function(t){if(function(t){return e.value.has(t)}(t)){console.log("[dataGridStore] deleteRow:",{rowId:t,rowsBefore:o.value.length,wasChecked:r.value.includes(t)}),e.value.delete(t),o.value=o.value.filter(e=>e!==t);const l=r.value.indexOf(t);l>-1&&r.value.splice(l,1),o.value.forEach((t,o)=>{const l=e.value.get(t);l&&(l.rowIndex=o)}),console.log("[dataGridStore] deleteRow complete:",{rowsAfter:o.value.length})}else console.warn("[dataGridStore] deleteRow: row not found",{rowId:t})},insertRow:function(t){const n=o.value.indexOf(t),r=T();console.log("[dataGridStore] insertRow:",{afterRowId:t,index:n,newRowId:r,rowsBefore:o.value.length});const a={rowId:r,rowIndex:n+1,height:32,cells:l.value.filter(e=>!e.specialType).map(e=>({rowId:r,columnName:e.name,value:null,isSelected:!1,isValidationError:!1}))};e.value.set(r,a),o.value.splice(n+1,0,r),o.value.forEach((t,o)=>{const l=e.value.get(t);l&&(l.rowIndex=o)}),console.log("[dataGridStore] insertRow complete:",{rowsAfter:o.value.length})},insertMultipleRows:function(t,n,r){const a=o.value.indexOf(t);if(-1===a)return void console.warn("[dataGridStore] insertMultipleRows: row not found",{rowId:t});console.log("[dataGridStore] insertMultipleRows:",{rowId:t,count:n,position:r,index:a,rowsBefore:o.value.length});const i="above"===r?a:a+1,s=[];for(let o=0;o<n;o++){const t=T(),n={rowId:t,rowIndex:i+o,height:32,cells:l.value.filter(e=>!e.specialType).map(e=>({rowId:t,columnName:e.name,value:null,isSelected:!1,isValidationError:!1}))};e.value.set(t,n),s.push(t)}o.value.splice(i,0,...s),o.value.forEach((t,o)=>{const l=e.value.get(t);l&&(l.rowIndex=o)}),console.log("[dataGridStore] insertMultipleRows complete:",{rowsAfter:o.value.length,newRowIds:s})},toggleCheckbox:function(e,t){if(console.log("[toggleCheckbox] Called:",{rowId:e,checked:t,currentCount:r.value.length}),t)r.value.includes(e)||r.value.push(e);else{const t=r.value.indexOf(e);t>-1&&r.value.splice(t,1)}console.log("[toggleCheckbox] After:",{count:r.value.length,checkboxState:B.value})},isRowChecked:function(e){return r.value.includes(e)},toggleAllCheckboxes:function(){const e=r.value.length,t=b.value.length;console.log("[toggleAllCheckboxes] BEFORE:",{currentCount:e,totalCount:t,checkboxState:B.value}),r.value.length===b.value.length?(console.log("[toggleAllCheckboxes] ACTION: Unchecking all (was all checked)"),r.value=[]):(console.log("[toggleAllCheckboxes] ACTION: Checking all (was not all checked)"),r.value=b.value.map(e=>e.rowId));const o=r.value.length,l=B.value;console.log("[toggleAllCheckboxes] AFTER:",{newCount:o,totalCount:t,newState:l})},setConfig:function(e){console.log("[dataGridStore] setConfig:",{newConfig:e,oldAutoValidate:p.value.autoValidate,newAutoValidate:e.autoValidate}),p.value={...p.value,...e},e.pageSize&&(a.value=e.pageSize),console.log("[dataGridStore] setConfig complete:",{autoValidate:p.value.autoValidate,enableValidation:p.value.enableValidation})},initializeEmptyRows:function(t){var n,r;const i=t||a.value;console.log("[dataGridStore] initializeEmptyRows:",{requestedCount:t,rowCount:i,currentRowsLength:b.value.length,columnsLength:l.value.length});const s=new Map,c=[];for(let e=0;e<i;e++){const t=T(),o={rowId:t,rowIndex:e,height:32,cells:l.value.filter(e=>!e.specialType).map(e=>({rowId:t,columnName:e.name,value:null,isSelected:!1,isValidationError:!1}))};s.set(t,o),c.push(t)}e.value=s,o.value=c,console.log("[dataGridStore] initializeEmptyRows complete:",{newRowsLength:b.value.length,firstRowCellsCount:null==(r=null==(n=b.value[0])?void 0:n.cells)?void 0:r.length})},setFilter:function(e){console.log("[dataGridStore] setFilter:",{filter:e}),d.value=e},clearFilter:function(){console.log("[dataGridStore] clearFilter"),d.value=null},setSearchQuery:function(e){u.value=e},clearSearch:function(){u.value=""},selectCell:function(e,t,o){const l=`${e}:${t}`;console.log("[dataGridStore] selectCell:",{rowId:e,columnName:t,isCtrlPressed:o,wasSelected:n.value.has(l),currentSelectionCount:n.value.size}),o?(g.value=!0,h.value=null,m.value=!1,n.value.has(l)?(n.value.delete(l),console.log("[dataGridStore] selectCell: toggled OFF",{cellKey:l})):(n.value.add(l),console.log("[dataGridStore] selectCell: toggled ON",{cellKey:l}))):(g.value=!1,h.value={rowId:e,columnName:t},m.value=!1,n.value.clear(),n.value.add(l),console.log("[dataGridStore] selectCell: single select",{cellKey:l})),console.log("[dataGridStore] selectCell complete:",{newSelectionCount:n.value.size})},startDragSelection:function(e,t){h.value&&(m.value=!0,n.value.clear(),D(e,t))},expandDragSelection:D,endDragSelection:function(){h.value=null,m.value=!1},isCellSelected:function(e,t){const o=`${e}:${t}`;return n.value.has(o)},setColumns:function(e){const t=e.filter(e=>!e.specialType).filter(e=>z.includes(e.name)).map(e=>e.name);if(t.length>0)throw new Error(`Column name conflict: The following column names are reserved for special columns and cannot be used: ${t.join(", ")}. Reserved names: ${z.join(", ")}`);const o=O(e);l.value=o,console.log("[dataGridStore] setColumns:",{originalCount:e.length,uniqueCount:o.length,columnNames:o.map(e=>e.name)})},ensureUniqueColumnNames:O,areNonEmptyRowsValid:function(){for(const e of b.value){if(e.cells.every(e=>null===e.value||void 0===e.value||""===e.value))continue;if(e.cells.some(e=>e.isValidationError))return!1}return!0},markCellValidated:function(e,t){const o=`${e}:${t}`;console.log("[dataGridStore] markCellValidated:",{rowId:e,columnName:t,cellKey:o,validatedCount:v.value.size}),v.value.add(o),w.value.delete(o)},clearValidationTracking:function(){console.log("[dataGridStore] clearValidationTracking:",{clearedValidatedCount:v.value.size,clearedChangedCount:w.value.size}),v.value.clear(),w.value.clear()},getCellsNeedingValidation:function(e=!1,t){console.log("[getCellsNeedingValidation] ðŸ” START",{totalRows:b.value.length,validatedCellsCount:v.value.size,changedCellsCount:w.value.size,forceValidateAll:e,hasColumnsWithRules:!!t});const o=new Set(l.value.filter(e=>!1!==e.visibleForGrid).map(e=>e.name)),n=t&&t.size>0?new Set([...o].filter(e=>t.has(e))):o;console.log("[getCellsNeedingValidation] ðŸ” Column filtering:",{totalColumns:l.value.length,visibleColumns:o.size,columnsWithRules:(null==t?void 0:t.size)??"N/A",columnsToValidate:n.size,skippedColumns:o.size-n.size,filterRate:t?`${Math.round(100*(1-n.size/o.size))}% skipped`:"N/A (no filter)"});const r=[];let a=0,i=0,s=0,c=0,d=0,u=0;for(const l of b.value){if(l.cells.filter(e=>n.has(e.columnName)).every(e=>null===e.value||void 0===e.value||""===e.value))a++;else for(const n of l.cells){const l=o.has(n.columnName),a=!t||t.has(n.columnName);if(!l){d++;continue}if(t&&!a){u++;continue}const p=`${n.rowId}:${n.columnName}`,h=v.value.has(p),m=w.value.has(p);e||!h||m?(r.push({rowId:n.rowId,columnName:n.columnName}),h?m&&s++:c++):i++}}return console.log("[getCellsNeedingValidation] ðŸ“Š RESULT:",{cellsToValidate:r.length,neverValidated:c,changedSinceValidation:s,alreadyValidated:i,emptyRowsSkipped:a,skippedInvisibleCells:d,skippedNoRulesCells:u,sampleCells:r.slice(0,3).map(e=>`${e.rowId}:${e.columnName}`)}),r},setMinRows:function(e){e<0?console.warn("[dataGridStore] setMinRows: Invalid value, must be >= 0:",e):(y.value=e,A(),console.log(`[dataGridStore] setMinRows: ${e}`))},clearAllData:function(){console.log("[dataGridStore] clearAllData called - clearing all state"),e.value.clear(),o.value=[],n.value.clear(),r.value=[],h.value=null,m.value=!1,g.value=!1,v.value.clear(),w.value.clear(),s.value.clear(),c.value=[],d.value=null,u.value="",i.value=1,console.log("[dataGridStore] All data cleared successfully")}}});return Ke.set(e,o),console.log("[useDataGridStore] Store definition cached for:",e),o};function Qe(){const e=t.ref(new Map),l=t.reactive({}),n=t.ref(0),r=t.ref(0);function a(){n.value=Object.keys(l).length}function i(t,o,l){const n=e.value.get(o)||[];console.log("[useValidation] validateCell:",{rowId:t,columnName:o,value:l,ruleCount:n.length,isEmpty:null==l||""===l});const r=null==l||""===l;for(const e of n){if("Required"===e.ruleType&&r)return console.log("[useValidation] validateCell FAILED: Required",{rowId:t,columnName:o,error:e.errorMessage,severity:e.severity}),{isValid:!1,error:e.errorMessage,severity:e.severity};if(!r){if("Regex"===e.ruleType&&e.regexPattern){if(!new RegExp(e.regexPattern).test(String(l)))return console.log("[useValidation] validateCell FAILED: Regex",{rowId:t,columnName:o,value:l,pattern:e.regexPattern,error:e.errorMessage}),{isValid:!1,error:e.errorMessage,severity:e.severity}}if("Range"===e.ruleType){const n=Number(l);if(isNaN(n))return console.log("[useValidation] validateCell FAILED: Range (not a number)",{rowId:t,columnName:o,value:l}),{isValid:!1,error:"Value must be a number",severity:e.severity};if(null!=e.minValue&&n<e.minValue)return console.log("[useValidation] validateCell FAILED: Range (below min)",{rowId:t,columnName:o,value:n,minValue:e.minValue}),{isValid:!1,error:e.errorMessage,severity:e.severity};if(null!=e.maxValue&&n>e.maxValue)return console.log("[useValidation] validateCell FAILED: Range (above max)",{rowId:t,columnName:o,value:n,maxValue:e.maxValue}),{isValid:!1,error:e.errorMessage,severity:e.severity}}if("Custom"===e.ruleType&&e.customValidator&&!e.customValidator(l))return console.log("[useValidation] validateCell FAILED: Custom",{rowId:t,columnName:o,value:l,error:e.errorMessage}),{isValid:!1,error:e.errorMessage,severity:e.severity}}}return console.log("[useValidation] validateCell PASSED",{rowId:t,columnName:o,value:l}),{isValid:!0}}function s(e){return e.every(e=>null==e.value||""===e.value)}function c(e,t,o,n,r=!1){if(console.log("[useValidation] validateCellDirect:",{rowId:e,columnName:t,value:o,hasRowCells:!!n,rowCellsCount:null==n?void 0:n.length,skipErrorCountUpdate:r}),n&&s(n))return console.log("[useValidation] validateCellDirect: Row is completely empty, clearing errors",{rowId:e}),delete l[e],r||a(),Promise.resolve();const c=i(e,t,o),d=l[e]||[];if(c.isValid){const o=d.filter(e=>e.columnName!==t);o.length>0?(l[e]=o,console.log("[useValidation] validateCellDirect: Cleared error for column, other errors remain",{rowId:e,columnName:t,remainingErrors:o.length})):(delete l[e],console.log("[useValidation] validateCellDirect: Cleared all errors for row",{rowId:e}))}else{const o=d.findIndex(e=>e.columnName===t),n={rowId:e,columnName:t,message:c.error,severity:c.severity};o>=0?(d[o]=n,console.log("[useValidation] validateCellDirect: Updated existing error",{rowId:e,columnName:t,error:n.message})):(d.push(n),console.log("[useValidation] validateCellDirect: Added new error",{rowId:e,columnName:t,error:n.message})),l[e]=d}return r||a(),Promise.resolve()}const d=o.useDebounceFn(c,300);return{validationRules:e,validationErrors:l,errorCount:n,ruleCount:r,addValidationRule:function(t){const o=e.value.get(t.columnName)||[];o.push(t),e.value.set(t.columnName,o),console.log("[useValidation] addValidationRule:",{columnName:t.columnName,ruleType:t.ruleType,severity:t.severity,totalRulesForColumn:o.length}),r.value++},validateCell:i,validateCellDirect:c,validateCellThrottled:d,validateAll:async function(e){var o,n;console.log("[useValidation] validateAll START:",{rowCount:e.length}),Object.keys(l).forEach(e=>delete l[e]);let r=0,c=0;const d=Math.ceil(e.length/50);for(let a=0;a<d;a++){const u=50*a,p=Math.min(u+50,e.length),h=e.slice(u,p);console.log(`[useValidation] Processing batch ${a+1}/${d} (rows ${u}-${p-1})`);for(const e of h)if(c<3&&console.log("[useValidation] validateAll: Examining row",{rowId:e.rowId,rowIndex:c,cellCount:(null==(o=e.cells)?void 0:o.length)||0}),c++,e.cells&&Array.isArray(e.cells))if(s(e.cells))console.log("[useValidation] validateAll: Skipping empty row",{rowId:e.rowId,cellCount:(null==(n=e.cells)?void 0:n.length)||0});else for(const t of e.cells){const o=i(e.rowId,t.columnName,t.value);if(!o.isValid){const n=l[e.rowId]||[];n.push({rowId:e.rowId,columnName:t.columnName,message:o.error,severity:o.severity}),l[e.rowId]=n,r++}}else console.log("[useValidation] validateAll: Skipping row without cells",{rowId:e.rowId,hasCells:!!e.cells,isArray:Array.isArray(e.cells)});await t.nextTick()}console.log("[useValidation] validateAll - loop FINISHED, processed",c,"rows"),console.log("[useValidation] validateAll - totalErrors:",r);const u=Object.keys(l).length;console.log("[useValidation] validateAll - rowsWithErrors:",u),console.log("[useValidation] validateAll complete - SUCCESS"),console.log("[useValidation] validateAll - calling updateErrorCount..."),a(),console.log("[useValidation] validateAll - updateErrorCount DONE"),console.log("[useValidation] validateAll - building errors array...");const p=[];for(const t in l){const e=l[t];e&&Array.isArray(e)&&p.push(...e)}return console.log("[useValidation] validateAll - errors array built, count:",p.length),console.log("[useValidation] validateAll - returning result..."),{isValid:0===r,totalErrors:r,errors:p}},getValidationErrors:function(e){return l[e]||[]},clearValidationErrors:function(){const e=Object.keys(l).length;console.log("[useValidation] clearValidationErrors:",{clearedCount:e}),Object.keys(l).forEach(e=>delete l[e]),a()},updateErrorCount:a}}function Ye(){const e=t.ref("");function o(e){if(!e)return e;if(!(e.includes("\t")||e.includes("\n")||e.includes("\r")||e.includes('"')))return e;return`"${e.replace(/"/g,'""')}"`}function l(e){return e.some(e=>e&&isNaN(Number(e)))}return{copyToClipboard:async function(t,l,n={}){try{if(0===t.length)return{success:!1,message:"No data selected for copy"};const r=function(e,t,l={}){const n=[];l.includeHeaders&&n.push(t.map(o).join("\t"));for(const r of e){const e=t.map(e=>{const t=r.cells.find(t=>t.columnName===e),l=null==t?void 0:t.value;return o((null==l?void 0:l.toString())??"")});n.push(e.join("\t"))}return n.join("\n")}(t,l,n);return await navigator.clipboard.writeText(r),e.value=r,{success:!0,message:`Copied ${t.length} rows to clipboard`,processedRows:t.length}}catch(r){return console.error("Copy failed:",r),{success:!1,message:`Copy failed: ${r}`}}},copySelectedCells:async function(t,l,n){var r;try{if(0===t.size)return{success:!1,message:"No cells selected for copy"};console.log("[useCopyPaste] copySelectedCells:",{selectedCount:t.size,selectedCells:Array.from(t)});const a=[];if(t.forEach(e=>{const[t,o]=e.split(":"),r=l.find(e=>e.rowId===t);if(!r)return;const i=n.findIndex(e=>e.name===o);if(-1===i)return;const s=r.cells.find(e=>e.columnName===o);a.push({rowId:t,rowIndex:r.rowIndex,columnName:o,columnIndex:i,value:null==s?void 0:s.value})}),0===a.length)return{success:!1,message:"No valid cells to copy"};const i=Math.min(...a.map(e=>e.rowIndex)),s=Math.max(...a.map(e=>e.rowIndex)),c=Math.min(...a.map(e=>e.columnIndex)),d=Math.max(...a.map(e=>e.columnIndex));console.log("[useCopyPaste] copySelectedCells bounds:",{minRowIndex:i,maxRowIndex:s,minColIndex:c,maxColIndex:d,rows:s-i+1,cols:d-c+1});const u=[];for(let e=i;e<=s;e++){const t=[];for(let l=c;l<=d;l++){const n=a.find(t=>t.rowIndex===e&&t.columnIndex===l);if(n){const e=(null==(r=n.value)?void 0:r.toString())??"";t.push(o(e))}else t.push("")}u.push(t.join("\t"))}const p=u.join("\n");return console.log("[useCopyPaste] copySelectedCells TSV:",{lineCount:u.length,preview:p.substring(0,200)}),await navigator.clipboard.writeText(p),e.value=p,{success:!0,message:`Copied ${a.length} cells to clipboard`,processedRows:a.length}}catch(a){return console.error("[useCopyPaste] Copy failed:",a),{success:!1,message:`Copy failed: ${a}`}}},pasteFromClipboard:async function(){try{let t="";try{t=await navigator.clipboard.readText()}catch{t=e.value}if(!t)return{success:!1,message:"No data available in clipboard"};const{headers:o,rows:n}=function(e){const t=[],o=[];let n="",r=!1,a=!0,i=[];for(let s=0;s<e.length;s++){const c=e[s],d=s+1<e.length?e[s+1]:null;if('"'===c)r&&'"'===d?(n+='"',s++):r=!r;else if("\t"!==c||r){if("\n"!==c&&"\r"!==c||r)n+=c;else if("\r"===c&&"\n"===d&&s++,n.length>0||o.length>0){if(o.push(n),n="",a){if(l(o))i=[...o];else{i=o.map((e,t)=>`Column${t+1}`);const e={};for(let t=0;t<Math.min(i.length,o.length);t++)e[i[t]]=o[t]||null;t.push(e)}a=!1}else{const e={};for(let t=0;t<Math.min(i.length,o.length);t++)e[i[t]]=o[t]||null;t.push(e)}o.length=0}}else o.push(n),n=""}if(n.length>0||o.length>0)if(o.push(n),a&&0===i.length)if(l(o))i=[...o];else{i=o.map((e,t)=>`Column${t+1}`);const e={};for(let t=0;t<Math.min(i.length,o.length);t++)e[i[t]]=o[t]||null;t.push(e)}else if(i.length>0){const e={};for(let t=0;t<Math.min(i.length,o.length);t++)e[i[t]]=o[t]||null;t.push(e)}return{headers:i,rows:t}}(t);return{success:!0,message:`Pasted ${n.length} rows from clipboard`,processedRows:n.length,rows:n,headers:o}}catch(t){return console.error("Paste failed:",t),{success:!1,message:`Paste failed: ${t}`}}},canPaste:function(){return!!e.value},clearClipboard:function(){e.value=""}}}const Xe={minHeight:32,maxHeight:400,fontFamily:"system-ui, -apple-system, sans-serif",fontSize:14,enableWrapping:!0,padding:16};function Ze(e=Xe){let t=null,o=null;function l(l,n){if(!l)return e.minHeight;const r=function(){if(t||(t=document.createElement("canvas"),o=t.getContext("2d")),!o)throw new Error("Failed to get canvas context");return o.font=`${e.fontSize}px ${e.fontFamily}`,o}();if(!e.enableWrapping)return e.minHeight;const a=l.toString().split("\n");let i=1.5*e.fontSize,s=0;for(const t of a){if(!t||""===t.trim()){s++;continue}const o=t.split(" ");let l="",a=1;for(const t of o){const o=l?`${l} ${t}`:t;r.measureText(o).width>n-e.padding?l?(a++,l=t):l=t:l=o}s+=a}const c=s*i+10;return Math.max(e.minHeight,Math.min(e.maxHeight,Math.ceil(c)))}function n(t,o){try{let n=e.minHeight;for(const e of o){if(e.specialType&&"ValidationAlerts"!==e.specialType)continue;let o=null;if(t.cells&&Array.isArray(t.cells)){const l=t.cells.find(t=>t.columnName===e.name);o=null==l?void 0:l.value}else o=t[e.name];if(null==o)continue;const r=l(String(o),e.width);n=Math.max(n,r)}return{rowId:t.__rowId||t.rowId,calculatedHeight:n,isSuccess:!0}}catch(n){return console.error("Row height calculation failed:",n),{rowId:t.__rowId||t.rowId,calculatedHeight:e.minHeight,isSuccess:!1}}}return{calculateRowHeight:n,calculateRowHeights:function(e,t){return e.map(e=>n(e,t))},applyAutoRowHeight:async function(t,o){let l=0,r=0;const a=Math.ceil(t.length/50);for(let e=0;e<a;e++){const i=50*e,s=Math.min(i+50,t.length),c=t.slice(i,s);console.log(`[AutoRowHeight] Processing batch ${e+1}/${a} (rows ${i}-${s-1})`);for(const e of c){const t=n(e,o);t.isSuccess&&(e.height=t.calculatedHeight,l+=t.calculatedHeight,r++)}await new Promise(e=>setTimeout(e,0))}return{totalRowsUpdated:r,averageHeight:r>0?l/r:e.minHeight}},recalculateRows:function(e,t,o){let l=0;for(const r of e)if(t.includes(r.rowId)){const e=n(r,o);e.isSuccess&&(r.height=e.calculatedHeight,l++)}return l},measureTextHeight:l,updateMaxHeight:function(t){e.maxHeight=t,console.log(`[useAutoRowHeight] maxHeight updated to: ${t}px`)}}}var et=(e=>(e.Normal="normal",e.Editing="editing",e.Selection="selection",e.Any="any",e))(et||{});function tt(e={}){const o=new Map,l=e.context||"normal";function n(e){const t=[];return e.ctrl&&t.push("Ctrl"),e.shift&&t.push("Shift"),e.alt&&t.push("Alt"),e.meta&&t.push("Meta"),t.push(e.key.toUpperCase()),t.join("+")}async function r(t){if(!e.enabled&&void 0!==e.enabled)return;const n=Array.from(o.values()).filter(e=>{return!1!==e.enabled&&function(e,t){return e.key.toUpperCase()===t.key.toUpperCase()&&!!e.ctrlKey==!!t.ctrl&&!!e.shiftKey==!!t.shift&&!!e.altKey==!!t.alt&&!!e.metaKey==!!t.meta}(t,e.key)&&(o=e.context||"normal",n=l,"any"===o||o===n||"any"===n);var o,n});if(0===n.length)return;n.sort((e,t)=>(t.priority||0)-(e.priority||0));const r=n[0];t.preventDefault(),t.stopPropagation();try{await r.handler(t)}catch(a){console.error(`Shortcut execution failed for ${r.name}:`,a)}}function a(e){const t=n(e.key);o.has(t)&&console.warn(`Shortcut ${t} is already registered. Overwriting.`),o.set(t,{...e,enabled:!1!==e.enabled,context:e.context||"normal",priority:e.priority||0})}return t.onMounted(()=>{!1!==e.enabled&&document.addEventListener("keydown",r)}),t.onUnmounted(()=>{document.removeEventListener("keydown",r)}),{registerShortcut:a,registerShortcuts:function(e){e.forEach(a)},unregisterShortcut:function(e){const t=n(e);return o.delete(t)},unregisterShortcutByName:function(e){const t=Array.from(o.entries()).find(([t,o])=>o.name===e);return!!t&&(o.delete(t[0]),!0)},setShortcutEnabled:function(e,t){const l=Array.from(o.entries()).find(([t,o])=>o.name===e);l&&(l[1].enabled=t)},getShortcuts:function(){return Array.from(o.values())},getShortcutsByContext:function(e){return Array.from(o.values()).filter(t=>t.context===e||"any"===t.context)},clearShortcuts:function(){o.clear()},handleKeyDown:r}}const ot=e=>({key:e,ctrl:!0}),lt=e=>({key:e,ctrl:!0,shift:!0}),nt=e=>({key:e});const rt=t.ref([]),at=t.ref(!1);let it=null;function st(e,t,o,l){const n={timestamp:(new Date).toISOString(),level:e,category:t,message:o,data:void 0!==l?JSON.parse(JSON.stringify(l)):void 0};rt.value.push(n),at.value||function(){if(null!==it)return;at.value=!0,it=window.setInterval(()=>{!function(){if(0===rt.value.length)return void ct();const e=rt.value.splice(0,50);for(const t of e)dt(t)}()},100)}()}function ct(){null!==it&&(window.clearInterval(it),it=null),at.value=!1}function dt(e){const t=`${`[${e.timestamp}] [${e.level}] [${e.category}]`} ${e.message}`;switch(e.level){case"DEBUG":void 0!==e.data?console.debug(t,e.data):console.debug(t);break;case"INFO":void 0!==e.data?console.log(t,e.data):console.log(t);break;case"WARN":void 0!==e.data?console.warn(t,e.data):console.warn(t);break;case"ERROR":case"FATAL":void 0!==e.data?console.error(t,e.data):console.error(t)}}const ut=new class{constructor(){r(this,"isHostMode",!1),this.isHostMode=this.detectHostMode(),console.log("Grid API Mode: "+(this.isHostMode?"Host Objects":"HTTP"))}detectHostMode(){return!!window.gridApi}async callHostApi(e,...t){try{if(!window.gridApi)throw new Error("Grid API not available");const o=window.gridApi,l=await o[e](...t);return JSON.parse(l)}catch(o){return console.error("Grid API call failed:",o),{success:!1,error:o instanceof Error?o.message:"Unknown error"}}}async request(e,t){try{const o=await fetch(`http://localhost:5000/api/grid${e}`,{...t,headers:{"Content-Type":"application/json",...null==t?void 0:t.headers},credentials:"include"});if(!o.ok){return{success:!1,error:(await o.json().catch(()=>({error:o.statusText}))).error||`HTTP ${o.status}: ${o.statusText}`}}return await o.json()}catch(o){return console.error("API request failed:",o),{success:!1,error:o instanceof Error?o.message:"Unknown error"}}}async getData(){return this.isHostMode?this.callHostApi("GetData"):this.request("/data")}async importData(e){if(this.isHostMode){const t=JSON.stringify({data:e});return this.callHostApi("ImportData",t)}return this.request("/import",{method:"POST",body:JSON.stringify({data:e})})}async exportData(e){if(this.isHostMode){const t=JSON.stringify({OnlyFiltered:(null==e?void 0:e.onlyFiltered)??!1,FilteredRowIds:(null==e?void 0:e.filteredRowIds)??null,ColumnNames:(null==e?void 0:e.columnNames)??null});return this.callHostApi("ExportData",t)}{const t=new URLSearchParams;(null==e?void 0:e.onlyFiltered)&&t.append("onlyFiltered","true"),(null==e?void 0:e.filteredRowIds)&&t.append("filteredRowIds",JSON.stringify(e.filteredRowIds)),(null==e?void 0:e.columnNames)&&t.append("columnNames",JSON.stringify(e.columnNames));const o=t.toString()?`?${t.toString()}`:"";return this.request(`/export${o}`)}}async getConfig(){return this.isHostMode?this.callHostApi("GetConfig"):this.request("/config")}async setValidationRules(e){if(this.isHostMode){const t=JSON.stringify({rules:e});return this.callHostApi("SetValidationRules",t)}return this.request("/validation-rules",{method:"POST",body:JSON.stringify({rules:e})})}async getValidationRules(){return this.isHostMode?this.callHostApi("GetValidationRules"):this.request("/validation-rules")}async getColumnNames(){var e;if(this.isHostMode){const t=await this.callHostApi("GetColumnNames");return{success:t.success,data:null==(e=t.data)?void 0:e.columnNames,error:t.error}}return this.request("/columns")}async getColumns(){return this.isHostMode?this.callHostApi("GetColumns"):this.request("/columns/definitions")}async healthCheck(){try{if(this.isHostMode){return(await this.callHostApi("HealthCheck")).success}return(await fetch("http://localhost:5000/health")).ok}catch{return!1}}},pt={cellColors:{defaultBackground:"#ffffff",defaultForeground:"#212529",hoverBackground:"#f8f9fa",hoverForeground:"#212529",focusedBackground:"#e3f2fd",focusedForeground:"#0d6efd",disabledBackground:"#e9ecef",disabledForeground:"#6c757d",readOnlyBackground:"#f8f9fa",readOnlyForeground:"#495057"},rowColors:{evenRowBackground:"#ffffff",oddRowBackground:"#f8f9fa",hoverBackground:"#e3f2fd",selectedBackground:"#0d6efd",selectedForeground:"#ffffff",selectedInactiveBackground:"#e9ecef",selectedInactiveForeground:"#495057"},headerColors:{background:"#f1f3f5",foreground:"#212529",hoverBackground:"#e9ecef",pressedBackground:"#dee2e6",sortIndicatorColor:"#0d6efd"},validationColors:{errorBackground:"#ffebee",errorForeground:"#c62828",errorBorder:"#ef5350",warningBackground:"#fff3e0",warningForeground:"#e65100",warningBorder:"#ff9800",infoBackground:"#e3f2fd",infoForeground:"#1565c0",infoBorder:"#2196f3"},selectionColors:{selectionBorder:"#0d6efd",selectionFill:"rgba(13, 110, 253, 0.1)",multiSelectionBackground:"#bbdefb",multiSelectionForeground:"#0d6efd"},borderColors:{cellBorder:"#e0e0e0",rowBorder:"#e0e0e0",columnBorder:"#dee2e6",gridBorder:"#ced4da",focusedCellBorder:"#0d6efd"},specialColumnColors:{rowNumberBackground:"#f5f5f5",rowNumberForeground:"#666666",checkboxBorder:"#ced4da",checkboxBackground:"#ffffff",checkboxForeground:"#212529",deleteRowBackground:"transparent",deleteRowForeground:"#dc3545",deleteRowHoverBackground:"#ffebee",insertRowBackground:"transparent",insertRowForeground:"#28a745",insertRowBorder:"transparent",insertRowHoverBackground:"#e8f5e9",insertRowHoverForeground:"#1b5e20",validationAlertsErrorBackground:"#ffebee",validationAlertsErrorForeground:"#c62828"},uiControlColors:{resizeGripColor:"#adb5bd",menuBackground:"#ffffff",menuForeground:"#212529",menuHoverBackground:"#f8f9fa",dialogBackground:"#ffffff",dialogForeground:"#212529",dialogBorder:"#dee2e6",placeholderColor:"#6c757d",searchPanelBackground:"#f8f9fa",searchPanelForeground:"#212529",searchPanelBorder:"#ced4da",filterRowBackground:"#f8f9fa",filterRowForeground:"#212529",filterRowBorder:"#dee2e6",paginationBackground:"#ffffff",paginationForeground:"#212529",paginationBorder:"#dee2e6",paginationButtonHoverBackground:"#e9ecef"}},ht={itemColors:{defaultBackground:"#ffffff",defaultForeground:"#212529",hoverBackground:"#f8f9fa",hoverForeground:"#212529",selectedBackground:"#e3f2fd",selectedForeground:"#0d6efd",selectedHoverBackground:"#bbdefb",selectedHoverForeground:"#0d6efd",disabledBackground:"#e9ecef",disabledForeground:"#6c757d"},containerColors:{background:"#ffffff",border:"#ced4da",focusedBorder:"#0d6efd",titleForeground:"#212529"},checkboxColors:{border:"#ced4da",background:"#ffffff",checkedBackground:"#0d6efd",checkedBorder:"#0d6efd",hoverBorder:"#adb5bd"},scrollbarColors:{trackBackground:"#f1f1f1",thumbBackground:"#c1c1c1",thumbHoverBackground:"#a8a8a8"}};const mt=["onClick","onContextmenu"],gt={key:0,class:"checkbox-icon"},ft={key:1,class:"checkbox-icon"},vt={key:1,class:"header-text"},wt={key:0,class:"sort-order"},yt=["onMousedown"],bt=(e,t)=>{const o=e.__vccOpts||e;for(const[l,n]of t)o[l]=n;return o},Ct=bt(t.defineComponent({__name:"DataGridHeader",props:{columns:{},gridTemplateColumns:{},gridId:{},isGridReady:{type:Boolean},isProcessing:{type:Boolean},showHiddenColumnsPanel:{type:Boolean}},emits:["sort","resize","hideColumn","autoFitColumn","showFilter"],setup(e,{emit:o}){const n=e,r=o,a=Je(n.gridId)(),i=t.ref(null),s=t.ref(0),c=t.ref(0),d=t.computed(()=>{const e=new Map;return a.sortColumns.forEach((t,o)=>{e.set(t.columnName,{direction:t.direction,order:o+1,isPrimary:0===o})}),e});function u(e){return d.value.get(e)??null}function p(e,t){"Checkbox"!==t.specialType&&(t.isSortable&&e.shiftKey?function(e,t=!1){if(!e.isSortable)return;const o=u(e.name);if(o){const l="asc"===o.direction?"desc":"asc";a.addSort(e.name,l,t)}else a.addSort(e.name,"asc",t);const l=u(e.name);l&&r("sort",e.name,l.direction)}(t,!0):f(e,t))}function h(){a.toggleAllCheckboxes()}function m(e){if(!i.value)return;const t=e.clientX-s.value,o=Math.max(i.value.minWidth,Math.min(i.value.maxWidth,c.value+t));r("resize",i.value.name,o)}function g(){i.value=null,window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",g)}function f(e,t){if(!1===n.isGridReady)return void console.error("[showHeaderContextMenu] Grid not ready yet");if(!a)return void console.error("[showHeaderContextMenu] Store not initialized yet");if(n.isProcessing)return void console.error("[showHeaderContextMenu] Grid is currently processing data");const o=[...a.sortColumns],i=a.filterExpression,s=[];if(t.isSortable){const e=u(t.name),l=o.length>0;s.push({label:"Sort Ascending",icon:"â–²",onClick:()=>{a.addSort(t.name,"asc",!1),r("sort",t.name,"asc")}},{label:"Sort Descending",icon:"â–¼",onClick:()=>{a.addSort(t.name,"desc",!1),r("sort",t.name,"desc")}}),l&&s.push({divided:!0},{label:"Add to Sort (Asc)",icon:"â–²+",onClick:()=>{a.addSort(t.name,"asc",!0)}},{label:"Add to Sort (Desc)",icon:"â–¼+",onClick:()=>{a.addSort(t.name,"desc",!0)}}),e&&s.push({divided:!0},{label:`Remove from Sort (Order ${e.order})`,icon:"âœ–",onClick:()=>{const e=o.filter(e=>e.columnName!==t.name);a.setSortColumns(e)}}),l&&s.push({label:"Clear All Sorts",icon:"ðŸ—‘",onClick:()=>{a.clearSort()}}),s.push({divided:!0})}t.isFilterable&&(s.push({label:"Filter...",icon:"ðŸ”",onClick:()=>r("showFilter",t.name)}),null!==i&&s.push({label:"Clear All Filters",icon:"ðŸ—‘",onClick:()=>{a.clearFilter()}}),s.push({divided:!0})),t.specialType||(s.push({label:"Auto-fit Column",icon:"â†”ï¸",onClick:()=>r("autoFitColumn",t.name)}),!1!==n.showHiddenColumnsPanel&&s.push({label:"Hide Column",icon:"ðŸ‘ï¸",onClick:()=>r("hideColumn",t.name)})),l.showContextMenu({x:e.x,y:e.y,items:s})}return(o,l)=>(t.openBlock(),t.createElementBlock("div",{class:"grid-header",style:t.normalizeStyle({gridTemplateColumns:e.gridTemplateColumns})},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.columns,e=>{var o,l,n,r;return t.openBlock(),t.createElementBlock("div",{key:e.name,class:t.normalizeClass(["header-cell",{"header-cell--auto-width":e.autoWidth}]),onClick:t=>p(t,e),onContextmenu:t.withModifiers(t=>f(t,e),["prevent"])},["Checkbox"===e.specialType?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(["custom-checkbox",{"checkbox-none":"none"===t.unref(a).checkboxState,"checkbox-some":"some"===t.unref(a).checkboxState,"checkbox-all":"all"===t.unref(a).checkboxState}]),onClick:t.withModifiers(h,["stop"]),title:"Toggle all checkboxes"},["all"===t.unref(a).checkboxState?(t.openBlock(),t.createElementBlock("span",gt,"âœ“")):"some"===t.unref(a).checkboxState?(t.openBlock(),t.createElementBlock("span",ft,"âˆ’")):t.createCommentVNode("",!0)],2)):(t.openBlock(),t.createElementBlock("span",vt,t.toDisplayString(e.header),1)),e.isSortable&&u(e.name)?(t.openBlock(),t.createElementBlock("span",{key:2,class:t.normalizeClass(["sort-icon",(null==(o=u(e.name))?void 0:o.isPrimary)?"sort-icon--primary":"sort-icon--secondary"])},[t.createTextVNode(t.toDisplayString("asc"===(null==(l=u(e.name))?void 0:l.direction)?"â–²":"â–¼")+" ",1),(null==(n=u(e.name))?void 0:n.order)&&u(e.name).order>1?(t.openBlock(),t.createElementBlock("span",wt,t.toDisplayString(null==(r=u(e.name))?void 0:r.order),1)):t.createCommentVNode("",!0)],2)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"resize-grip",onMousedown:t.withModifiers(t=>function(e,t){i.value=e,s.value=t.clientX,c.value=e.width,window.addEventListener("mousemove",m),window.addEventListener("mouseup",g)}(e,t),["stop"])},null,40,yt)],42,mt)}),128))],4))}}),[["__scopeId","data-v-d456deec"]]),kt=["innerHTML"],Et=bt(t.defineComponent({__name:"DataGridCell",props:{cell:{},column:{},isSelected:{type:Boolean},gridId:{}},emits:["editComplete","cellInput","copy","cut","paste","delete","insertAbove","insertBelow"],setup(e,{emit:o}){const n=e,r=o,a=Je(n.gridId)(),i=t.inject("validation",null),s=(null==i?void 0:i.validateCellThrottled)||(()=>{}),c=(null==i?void 0:i.validationErrors)||{},d=t.ref(),u=t.ref(),p=t.ref(!1),h=t.ref(n.cell.value),m=t.ref(null),g=t.ref(!1),f=t.ref(null),v=t.ref(!1),w=t.computed(()=>null==n.cell.value?"":String(n.cell.value)),y=t.computed(()=>w.value.includes("\n")),b=t.computed(()=>{const e=w.value,t=a.searchQuery;if(!t||!e)return C(e);try{const o=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),l=new RegExp(`(${o})`,"gi");return C(e).replace(l,'<mark class="search-highlight">$1</mark>')}catch(o){return C(e)}});function C(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}const k=t.computed(()=>(c[n.cell.rowId]||[]).find(e=>e.columnName===n.cell.columnName)),E=t.computed(()=>{var e,t,o,l;return{"cell--selected":n.isSelected,"cell--editing":p.value,"cell--validation-error":"Error"===(null==(e=k.value)?void 0:e.severity)||"Critical"===(null==(t=k.value)?void 0:t.severity),"cell--validation-warning":"Warning"===(null==(o=k.value)?void 0:o.severity)||"Info"===(null==(l=k.value)?void 0:l.severity),"cell--readonly":n.column.isReadOnly,"cell--auto-height":a.isAutoRowHeightEnabled,"cell--has-newlines":y.value&&!a.isAutoRowHeightEnabled}}),S=t.computed(()=>({}));function R(e){if(0!==e.button)return;const t=e.ctrlKey;console.log("[DataGridCell] MouseDown:",{rowId:n.cell.rowId,columnName:n.cell.columnName,isEditing:p.value}),a.selectCell(n.cell.rowId,n.cell.columnName,t)}function N(e){if(g.value=!0,d.value){const e=d.value.getBoundingClientRect();f.value={left:e.left,top:e.top-4}}if(e.ctrlKey||a.wasCtrlPressed)return;const t=1===e.buttons;if(a.pressedCell&&!a.isDragging&&t){if(n.cell.rowId===a.pressedCell.rowId&&n.cell.columnName===a.pressedCell.columnName)return;a.startDragSelection(n.cell.rowId,n.cell.columnName)}else a.isDragging&&t&&a.expandDragSelection(n.cell.rowId,n.cell.columnName)}function x(){g.value=!1,f.value=null}function I(e){p.value||!n.isSelected||"Enter"!==e.key||n.column.isReadOnly||(e.preventDefault(),V())}async function V(){var e,o;n.column.isReadOnly||(console.log("[DataGridCell] enterEditMode:",{rowId:n.cell.rowId,columnName:n.cell.columnName,currentCellValue:n.cell.value,storingAsOriginal:n.cell.value}),m.value=n.cell.value,p.value=!0,h.value=n.cell.value,await t.nextTick(),null==(e=u.value)||e.focus(),null==(o=u.value)||o.select())}async function _(){console.log("[DataGridCell] handleDoubleClick:",{rowId:n.cell.rowId,columnName:n.cell.columnName,currentValue:n.cell.value}),V()}function A(){const e=a.rows.find(e=>e.rowId===n.cell.rowId);if(e)return e.cells.map(e=>({columnName:e.columnName,value:e.value}))}function $(){if(console.log("[DataGridCell] handleInput:",{rowId:n.cell.rowId,columnName:n.cell.columnName,newValue:h.value,autoValidate:a.config.autoValidate}),a.config.autoValidate&&a.config.enableValidation){const e=A();s(n.cell.rowId,n.cell.columnName,h.value,e)}r("cellInput",n.cell.rowId,n.cell.columnName,h.value)}function T(e){if(console.log("[DataGridCell] handleKeyDown:",{rowId:n.cell.rowId,columnName:n.cell.columnName,key:e.key,shift:e.shiftKey,ctrl:e.ctrlKey}),"Escape"===e.key)return e.preventDefault(),e.stopPropagation(),void B();if("Enter"===e.key&&!e.shiftKey)return e.preventDefault(),e.stopPropagation(),void function(){if(console.log("[DataGridCell] confirmEdit:",{rowId:n.cell.rowId,columnName:n.cell.columnName,confirmedValue:h.value,originalWas:m.value}),v.value=!0,a.config.autoValidate&&a.config.enableValidation){const e=A();s(n.cell.rowId,n.cell.columnName,h.value,e)}r("editComplete",n.cell.rowId,n.cell.columnName,h.value),p.value=!1,m.value=null,t.nextTick(()=>{try{console.log(`[DataGridCell] confirmEdit - Attempting to restore focus to cell: rowId=${n.cell.rowId}, column=${n.cell.columnName}`),d.value?(d.value.focus(),console.log("[DataGridCell] confirmEdit - Focus restored successfully")):console.log("[DataGridCell] confirmEdit - WARNING: cellRef.value is null/undefined")}catch(e){console.log(`[DataGridCell] confirmEdit - ERROR restoring focus: ${e}`)}}),setTimeout(()=>{v.value=!1},100)}();if("Tab"===e.key){e.preventDefault();const o=e.target,l=o.selectionStart,n=o.selectionEnd;h.value=h.value.substring(0,l)+"\t"+h.value.substring(n),t.nextTick(()=>{o.selectionStart=o.selectionEnd=l+1})}}function B(){if(console.log("[DataGridCell] cancelEdit:",{rowId:n.cell.rowId,columnName:n.cell.columnName,originalValue:m.value,currentEditValue:h.value}),h.value=m.value,p.value=!1,r("editComplete",n.cell.rowId,n.cell.columnName,m.value),a.config.autoValidate&&a.config.enableValidation){const e=A();s(n.cell.rowId,n.cell.columnName,m.value,e)}m.value=null,t.nextTick(()=>{try{console.log(`[DataGridCell] cancelEdit - Attempting to restore focus to cell: rowId=${n.cell.rowId}, column=${n.cell.columnName}`),d.value?(d.value.focus(),console.log("[DataGridCell] cancelEdit - Focus restored successfully")):console.log("[DataGridCell] cancelEdit - WARNING: cellRef.value is null/undefined")}catch(e){console.log(`[DataGridCell] cancelEdit - ERROR restoring focus: ${e}`)}})}function D(){console.log("[DataGridCell] handleBlur:",{rowId:n.cell.rowId,columnName:n.cell.columnName,isEditing:p.value,isConfirming:v.value}),p.value&&!v.value&&B()}function z(e){if(!e.ctrlKey)return;e.preventDefault();const t=new Map;a.selectedCells.forEach(e=>{const[o]=e.split(":"),l=a.rows.find(e=>e.rowId===o);l&&t.set(o,l.rowIndex)});const o=t.size,i=Array.from(t.values()),s=i.length>0?Math.min(...i):0,c=i.length>0?Math.max(...i):0,d=a.rows.find(e=>e.rowIndex===s),u=a.rows.find(e=>e.rowIndex===c);l.showContextMenu({x:e.x,y:e.y,items:[{label:"Copy",icon:"ðŸ“‹",onClick:()=>r("copy"),disabled:!n.isSelected},{label:"Cut",icon:"âœ‚ï¸",onClick:()=>r("cut"),disabled:!n.isSelected||n.column.isReadOnly},{label:"Paste",icon:"ðŸ“„",onClick:()=>r("paste"),disabled:n.column.isReadOnly},{divided:!0},{label:"Delete",icon:"ðŸ—‘ï¸",onClick:()=>r("delete"),disabled:!n.isSelected||n.column.isReadOnly},{divided:!0},{label:`Insert ${o} row(s) above`,icon:"â¬†ï¸",onClick:()=>r("insertAbove",(null==d?void 0:d.rowId)||n.cell.rowId,o||1),disabled:n.column.isReadOnly},{label:`Insert ${o} row(s) below`,icon:"â¬‡ï¸",onClick:()=>r("insertBelow",(null==u?void 0:u.rowId)||n.cell.rowId,o||1),disabled:n.column.isReadOnly}]})}return(o,l)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"cellRef",ref:d,class:t.normalizeClass(["grid-cell",E.value]),style:t.normalizeStyle(S.value),onMousedown:R,onMouseenter:N,onMouseleave:x,onDblclick:_,onKeydown:I,onContextmenu:z,tabindex:"0"},[p.value?t.withDirectives((t.openBlock(),t.createElementBlock("textarea",{key:1,ref_key:"inputRef",ref:u,"onUpdate:modelValue":l[0]||(l[0]=e=>h.value=e),class:"cell-input",onInput:$,onBlur:D,onKeydown:T},null,544)),[[t.vModelText,h.value]]):(t.openBlock(),t.createElementBlock("div",{key:0,class:"cell-text",innerHTML:b.value},null,8,kt)),(t.openBlock(),t.createBlock(t.Teleport,{to:"body"},[k.value&&(g.value||e.isSelected)&&f.value?(t.openBlock(),t.createElementBlock("div",{key:0,class:t.normalizeClass(["validation-tooltip",{"validation-tooltip--error":"Error"===k.value.severity||"Critical"===k.value.severity,"validation-tooltip--warning":"Warning"===k.value.severity||"Info"===k.value.severity}]),style:t.normalizeStyle({position:"fixed",left:f.value.left+"px",top:f.value.top+"px"})},t.toDisplayString(k.value.message),7)):t.createCommentVNode("",!0)]))],38))}}),[["__scopeId","data-v-46101a22"]]),St={key:0,class:"row-number"},Rt=["checked"],Nt=["title"],xt={class:"validation-message"},It=["disabled"],Vt=bt(t.defineComponent({__name:"SpecialColumnCell",props:{specialType:{},rowId:{},rowIndex:{},column:{},isChecked:{type:Boolean}},emits:["checkboxChange","deleteRow","insertRow"],setup(e,{emit:o}){const l=e,n=o;t.watch(()=>l.isChecked,(e,t)=>{"Checkbox"===l.specialType&&console.log("[SpecialColumnCell] isChecked prop changed:",{rowId:l.rowId,newVal:e,oldVal:t})},{immediate:!0});const r=t.inject("validation",null),a=(null==r?void 0:r.validationErrors)||{},i=t.ref(!1),s=t.ref(0),c=t.computed(()=>l.rowIndex+1),d=t.computed(()=>a[l.rowId]||[]),u=t.computed(()=>d.value.some(e=>"Error"===e.severity||"Critical"===e.severity)),p=t.computed(()=>d.value.some(e=>"Warning"===e.severity)),h=t.computed(()=>{const e=d.value;return 0===e.length?"":e.map(e=>`${e.columnName}: ${e.message}`).join("; ")}),m=t.computed(()=>({"special-cell--row-number":"RowNumber"===l.specialType,"special-cell--checkbox":"Checkbox"===l.specialType,"special-cell--validation":"ValidationAlerts"===l.specialType,"special-cell--delete":"DeleteRow"===l.specialType,"special-cell--insert":"InsertRow"===l.specialType})),g=t.computed(()=>({}));function f(e){const t=e.target;console.log("[SpecialColumnCell] Checkbox change:",{rowId:l.rowId,checked:t.checked,currentProp:l.isChecked}),n("checkboxChange",l.rowId,t.checked)}function v(){const e=Date.now();e-s.value<300||(s.value=e,confirm("Are you sure you want to delete this row?")&&(i.value=!0,n("deleteRow",l.rowId),setTimeout(()=>{i.value=!1},1e3)))}function w(){n("insertRow",l.rowId)}return(o,l)=>(t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["special-cell",m.value]),style:t.normalizeStyle(g.value),onMousedown:l[0]||(l[0]=t.withModifiers(()=>{},["stop"])),onMouseenter:l[1]||(l[1]=t.withModifiers(()=>{},["stop"]))},["RowNumber"===e.specialType?(t.openBlock(),t.createElementBlock("span",St,t.toDisplayString(c.value),1)):"Checkbox"===e.specialType?(t.openBlock(),t.createElementBlock("input",{key:1,type:"checkbox",class:"checkbox-input",checked:e.isChecked,onChange:f},null,40,Rt)):"ValidationAlerts"===e.specialType?(t.openBlock(),t.createElementBlock("div",{key:2,class:t.normalizeClass(["validation-alerts",{"has-errors":u.value||p.value}]),title:h.value},[t.createElementVNode("span",xt,t.toDisplayString(h.value),1)],10,Nt)):"DeleteRow"===e.specialType?(t.openBlock(),t.createElementBlock("button",{key:3,class:"delete-button",disabled:i.value,onClick:v,title:"Delete row"}," ðŸ—‘ï¸ ",8,It)):"InsertRow"===e.specialType?(t.openBlock(),t.createElementBlock("button",{key:4,class:"insert-button",onClick:w,title:"Insert new row"}," âž• ")):t.createCommentVNode("",!0)],38))}}),[["__scopeId","data-v-771c0d4c"]]),_t=bt(t.defineComponent({__name:"DataGridRow",props:{row:{},columns:{},gridTemplateColumns:{},gridId:{}},emits:["cellEditComplete","cellInput","checkboxChange","deleteRow","insertRow","insertAbove","insertBelow"],setup(e,{emit:o}){const l=e,n=o,r=Je(l.gridId)(),a=t.computed(()=>{const e=r.isRowChecked(l.row.rowId);return console.log("[DataGridRow] Row checked state:",{rowId:l.row.rowId,checked:e}),e});function i(e){const t=l.row.cells.find(t=>t.columnName===e);return t||{rowId:l.row.rowId,columnName:e,value:null,isSelected:!1,isValidationError:!1}}function s(e,t,o){n("cellEditComplete",e,t,o)}function c(e,t,o){n("cellInput",e,t,o)}function d(e,t){n("checkboxChange",e,t)}function u(e){n("deleteRow",e)}function p(e){n("insertRow",e)}function h(e,t){n("insertAbove",e,t)}function m(e,t){n("insertBelow",e,t)}return(o,l)=>(t.openBlock(),t.createElementBlock("div",{class:"grid-row",style:t.normalizeStyle({height:e.row.height+"px",gridTemplateColumns:e.gridTemplateColumns})},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.columns,o=>(t.openBlock(),t.createElementBlock(t.Fragment,{key:`${e.row.rowId}:${o.name}`},[o.specialType?(t.openBlock(),t.createBlock(Vt,{key:0,"special-type":o.specialType,"row-id":e.row.rowId,"row-index":e.row.rowIndex,column:o,"is-checked":"Checkbox"===o.specialType?a.value:void 0,onCheckboxChange:d,onDeleteRow:u,onInsertRow:p},null,8,["special-type","row-id","row-index","column","is-checked"])):(t.openBlock(),t.createBlock(Et,{key:1,cell:i(o.name),column:o,"is-selected":t.unref(r).isCellSelected(e.row.rowId,o.name),"grid-id":e.gridId,onEditComplete:s,onCellInput:c,onInsertAbove:h,onInsertBelow:m},null,8,["cell","column","is-selected","grid-id"]))],64))),128))],4))}}),[["__scopeId","data-v-16300a38"]]),At={class:"pagination"},$t=["disabled"],Tt=["disabled"],Bt={class:"page-numbers"},Dt=["onClick"],zt=["disabled"],Ot=["disabled"],Ft={class:"page-info"},Ht=["value"],Pt=["value"],Mt=bt(t.defineComponent({__name:"PaginationControl",props:{currentPage:{},pageSize:{},totalRows:{},pageSizeOptions:{default:()=>[50,100,200,500]}},emits:["pageChange","pageSizeChange"],setup(e,{emit:o}){const l=e,n=o,r=t.computed(()=>{const e=[...l.pageSizeOptions];return e.includes(l.pageSize)||e.push(l.pageSize),e.sort((e,t)=>e-t)}),a=t.computed(()=>Math.ceil(l.totalRows/l.pageSize)),i=t.computed(()=>{const e=a.value,t=l.currentPage;if(e<=20){const t=[];for(let o=1;o<=e;o++)t.push(o);return t}const o=Math.ceil(e/20),n=new Set;n.add(1),n.add(e),n.add(t),t>1&&n.add(t-1),t<e&&n.add(t+1);for(let l=1;l<=e;l+=o)n.add(l);return Array.from(n).sort((e,t)=>e-t)});function s(e){const t=e.target;n("pageSizeChange",Number(t.value))}return(o,l)=>(t.openBlock(),t.createElementBlock("div",At,[t.createElementVNode("button",{onClick:l[0]||(l[0]=e=>n("pageChange",1)),disabled:1===e.currentPage}," First ",8,$t),t.createElementVNode("button",{onClick:l[1]||(l[1]=t=>n("pageChange",e.currentPage-1)),disabled:1===e.currentPage}," Previous ",8,Tt),t.createElementVNode("div",Bt,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(i.value,o=>(t.openBlock(),t.createElementBlock("button",{key:o,class:t.normalizeClass({"page-number":!0,active:o===e.currentPage}),onClick:e=>n("pageChange",o)},t.toDisplayString(o),11,Dt))),128))]),t.createElementVNode("button",{onClick:l[2]||(l[2]=t=>n("pageChange",e.currentPage+1)),disabled:e.currentPage===a.value}," Next ",8,zt),t.createElementVNode("button",{onClick:l[3]||(l[3]=e=>n("pageChange",a.value)),disabled:e.currentPage===a.value}," Last ",8,Ot),t.createElementVNode("span",Ft," ("+t.toDisplayString(e.totalRows)+" rows) ",1),t.createElementVNode("select",{value:e.pageSize,onChange:s},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(r.value,e=>(t.openBlock(),t.createElementBlock("option",{key:e,value:e},t.toDisplayString(e),9,Pt))),128))],40,Ht)]))}}),[["__scopeId","data-v-8f2dff14"]]),Lt={class:"filter-header"},Gt={class:"filter-title"},Ut={class:"filter-mode"},jt={key:0,class:"filter-content"},Wt={class:"filter-values"},qt=["onUpdate:modelValue"],Kt={class:"value-text"},Jt={key:0,class:"no-values"},Qt={key:1,class:"filter-content"},Yt={class:"regex-label"},Xt=bt(t.defineComponent({__name:"FilterFlyout",props:{visible:{type:Boolean},columnName:{},position:{},uniqueValues:{},currentMode:{},currentPattern:{}},emits:["close","applyCheckbox","applyRegex","clearFilter"],setup(e,{emit:o}){const l=e,n=o,r=t.ref(l.currentMode||"checkbox"),a=t.ref(""),i=t.ref(l.currentPattern||""),s=t.ref([]);t.watch(()=>l.uniqueValues,e=>{s.value=e.map(e=>({...e}))},{immediate:!0,deep:!0}),t.watch(()=>l.currentPattern,e=>{e&&(i.value=e)},{immediate:!0});const c=t.computed(()=>{if(!a.value)return s.value;const e=a.value.toLowerCase();return s.value.filter(t=>t.value.toLowerCase().includes(e))}),d=e=>e.count>0?`${e.value} (${e.count})`:e.value;function u(){c.value.forEach(e=>{e.isSelected=!0})}function p(){c.value.forEach(e=>{e.isSelected=!1})}function h(){if("checkbox"===r.value){const e=s.value.filter(e=>e.isSelected).map(e=>e.value);n("applyCheckbox",e)}else n("applyRegex",i.value);g()}function m(){n("clearFilter"),g()}function g(){n("close")}return(o,l)=>(t.openBlock(),t.createBlock(t.Teleport,{to:"body"},[e.visible?(t.openBlock(),t.createElementBlock("div",{key:0,class:"filter-flyout-overlay",onClick:t.withModifiers(g,["self"])},[t.createElementVNode("div",{class:"filter-flyout",style:t.normalizeStyle({top:e.position.y+"px",left:e.position.x+"px"})},[t.createElementVNode("div",Lt,[t.createElementVNode("h3",Gt,"Filter: "+t.toDisplayString(e.columnName),1),t.createElementVNode("button",{class:"close-button",onClick:g},"âœ•")]),t.createElementVNode("div",Ut,[t.createElementVNode("label",null,[t.withDirectives(t.createElementVNode("input",{type:"radio",value:"checkbox","onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),name:"filterMode"},null,512),[[t.vModelRadio,r.value]]),l[4]||(l[4]=t.createElementVNode("span",null,"Checkbox",-1))]),t.createElementVNode("label",null,[t.withDirectives(t.createElementVNode("input",{type:"radio",value:"regex","onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),name:"filterMode"},null,512),[[t.vModelRadio,r.value]]),l[5]||(l[5]=t.createElementVNode("span",null,"Regex",-1))])]),"checkbox"===r.value?(t.openBlock(),t.createElementBlock("div",jt,[t.withDirectives(t.createElementVNode("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>a.value=e),type:"text",class:"filter-search",placeholder:"Search values..."},null,512),[[t.vModelText,a.value]]),t.createElementVNode("div",{class:"filter-actions"},[t.createElementVNode("button",{class:"action-button",onClick:u},"Select All"),t.createElementVNode("button",{class:"action-button",onClick:p},"Deselect All")]),t.createElementVNode("div",Wt,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(c.value,e=>(t.openBlock(),t.createElementBlock("label",{key:e.value,class:t.normalizeClass(["value-item",{"value-item--selected":e.isSelected}])},[t.withDirectives(t.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":t=>e.isSelected=t,class:"value-checkbox"},null,8,qt),[[t.vModelCheckbox,e.isSelected]]),t.createElementVNode("span",Kt,t.toDisplayString(e.displayText||d(e)),1)],2))),128)),0===c.value.length?(t.openBlock(),t.createElementBlock("div",Jt," No values found ")):t.createCommentVNode("",!0)])])):(t.openBlock(),t.createElementBlock("div",Qt,[t.createElementVNode("label",Yt,[l[6]||(l[6]=t.createElementVNode("span",null,"Regex Pattern:",-1)),t.withDirectives(t.createElementVNode("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>i.value=e),type:"text",class:"regex-input",placeholder:"^test.*|.*example$"},null,512),[[t.vModelText,i.value]])]),l[7]||(l[7]=t.createElementVNode("div",{class:"regex-help"},[t.createElementVNode("details",null,[t.createElementVNode("summary",null,"Regex Examples"),t.createElementVNode("ul",null,[t.createElementVNode("li",null,[t.createElementVNode("code",null,"^test"),t.createTextVNode(' - Starts with "test"')]),t.createElementVNode("li",null,[t.createElementVNode("code",null,"example$"),t.createTextVNode(' - Ends with "example"')]),t.createElementVNode("li",null,[t.createElementVNode("code",null,"^test.*example$"),t.createTextVNode(' - Starts with "test" and ends with "example"')]),t.createElementVNode("li",null,[t.createElementVNode("code",null,"test|example"),t.createTextVNode(' - Contains "test" OR "example"')]),t.createElementVNode("li",null,[t.createElementVNode("code",null,"\\d{3}"),t.createTextVNode(" - Contains exactly 3 digits")])])])],-1))])),t.createElementVNode("div",{class:"filter-footer"},[t.createElementVNode("button",{class:"footer-button footer-button--apply",onClick:h}," Apply Filter "),t.createElementVNode("button",{class:"footer-button footer-button--clear",onClick:m}," Clear Filter "),t.createElementVNode("button",{class:"footer-button footer-button--cancel",onClick:g}," Cancel ")])],4)])):t.createCommentVNode("",!0)]))}}),[["__scopeId","data-v-4fbdbd14"]]),Zt={key:0,class:"processing-overlay"},eo={class:"processing-content"},to={class:"processing-text"},oo={key:0,class:"progress-container"},lo={class:"progress-bar-wrapper"},no={class:"progress-text"},ro={key:1,class:"loading-overlay"},ao={class:"loading-content"},io={class:"loading-text"},so={key:0,class:"progress-container"},co={class:"progress-bar-wrapper"},uo={class:"progress-text"},po={class:"grid-toolbar"},ho={class:"toolbar-section"},mo=["title"],go={class:"toolbar-section"},fo=["disabled"],vo=["disabled"],wo={key:2,class:"hidden-columns-panel"},yo=["onClick","title"],bo={class:"grid-container"},Co=bt(t.defineComponent({__name:"DataGrid",props:{config:{},columns:{},gridId:{},theme:{},minTableWidth:{},width:{},height:{},autoRowHeightEnabled:{type:Boolean},minRows:{},showHiddenColumnsPanel:{type:Boolean}},setup(e,{expose:l}){var n;const r=e,a=r.gridId||`grid-${Math.random().toString(36).substr(2,9)}`,i=function(e="App"){return{debug(t,o){st("DEBUG",e,t,o)},info(t,o){st("INFO",e,t,o)},warn(t,o){st("WARN",e,t,o)},error(t,o){st("ERROR",e,t,o)},fatal(t,o){st("FATAL",e,t,o)},flush(){for(;rt.value.length>0;)dt(rt.value.shift());ct()},getQueueSize:()=>rt.value.length}}(`DataGrid[${a}]`);i.info("âš™ï¸ Component initializing",{gridId:a,hasConfig:!!r.config,hasColumns:!!r.columns,columnCount:(null==(n=r.columns)?void 0:n.length)||0}),console.log("[DataGrid] Creating store with ID:",a);const s=Je(a);let c;console.log("[DataGrid] Store factory created:",typeof s,s);try{c=s(),console.log("[DataGrid] Store instance created:",c),i.debug("ðŸ“¦ Store created",{instanceId:a})}catch(Re){throw console.error("[DataGrid] FAILED to create store:",Re),i.error("âŒ Store creation failed",{instanceId:a,error:Re}),Re}void 0!==r.autoRowHeightEnabled&&(c.setAutoRowHeightEnabled(r.autoRowHeightEnabled),i.info(`ðŸ”§ AutoRowHeight initialized to: ${r.autoRowHeightEnabled}`)),void 0!==r.minRows&&(c.setMinRows(r.minRows),i.info(`ðŸ”§ MinRows initialized to: ${r.minRows}`));const d=Qe();t.provide("validation",d);const u=Ye(),{filterRows:p,evaluateFilter:h}=We(),m=t.ref(!1),g=t.ref(!1),f=t.ref(!1),v=t.ref({isValidating:!1,current:0,total:0,percentage:0});let w=!1;const y=t.ref(800),b=t.computed(()=>{const e=Math.max(32,Math.floor(.7*y.value));return console.log(`[AutoRowHeight] Computed maxHeight: ${e}px (container: ${y.value}px)`),e}),C=Ze({minHeight:32,maxHeight:b.value,fontFamily:"system-ui, -apple-system, sans-serif",fontSize:14,enableWrapping:!0,padding:16});t.watch(b,async e=>{console.log(`[AutoRowHeight] maxHeight changed to: ${e}px`),C.updateMaxHeight(e),c.isAutoRowHeightEnabled&&c.rows.length>0&&(console.log("[AutoRowHeight] maxHeight changed - recalculating all row heights..."),await ge())});const k=()=>{if(!x.value)return void console.log("[AutoRowHeight] Cannot measure: scrollerRef is null");if(!x.value.$el)return void console.log("[AutoRowHeight] Cannot measure: scrollerRef.$el is undefined");const e=x.value.$el.clientHeight;e>0?(y.value=e,console.log(`[AutoRowHeight] Container height measured: ${e}px`)):console.log("[AutoRowHeight] Container height is 0, keeping default")};t.onMounted(async()=>{if(i.info("========== âœ… Component mounted - START initialization ==========",{gridId:r.gridId,autoRowHeight:c.isAutoRowHeightEnabled,rowCount:c.rows.length,columnCount:c.columns.length}),document.addEventListener("mouseup",F),document.addEventListener("keydown",B),i.debug("ðŸŽ¯ Event listeners registered (mouseup, keydown)"),r.columns&&r.columns.length>0&&0===c.rows.length){i.info("ðŸ”§ Auto-initializing empty rows from provided columns",{columnCount:r.columns.length});try{c.setColumns(r.columns),c.initializeEmptyRows(),i.info(`âœ… Auto-initialized ${c.rows.length} empty rows`)}catch(Re){i.error("âŒ Failed to set columns:",Re),alert(`Column configuration error: ${Re instanceof Error?Re.message:"Unknown error"}`)}}if(ye(),await t.nextTick(),i.debug("â° DOM ready after nextTick"),k(),c.isAutoRowHeightEnabled&&c.rows.length>0){i.info("ðŸ“ AutoRowHeight enabled - applying heights..."),await t.nextTick();try{await ge(),i.info("âœ… AutoRowHeight applied successfully on mount")}catch(Re){i.error("âŒ AutoRowHeight ERROR on mount:",Re)}}else i.debug(`â­ï¸ Skipping AutoRowHeight: enabled=${c.isAutoRowHeightEnabled}, rowCount=${c.rows.length}`);window.addEventListener("resize",k),i.debug("ðŸŽ¯ Resize listener registered"),await t.nextTick(),m.value=!0,i.info("========== âœ… Grid marked as READY for user interaction ==========")}),t.onBeforeUnmount(()=>{window.removeEventListener("resize",k),document.removeEventListener("mouseup",F),document.removeEventListener("keydown",B),i.info("ðŸ§¹ Cleanup: All event listeners removed")});const E=t.ref(!1),S=t.ref(!1),R=t.ref(!1),N=t.ref({isLoading:!1,operation:"",progress:0,total:0,percentage:0}),x=t.ref(),I=async()=>{const e=(()=>{const e=Array.from(c.selectedCells);if(0===e.length)return[];const t=new Set(e.map(e=>e.split(":")[0]));return c.rows.filter(e=>t.has(e.rowId))})();if(0===e.length)return void console.warn("No rows selected for copy");const t=T.value.filter(e=>!e.specialType).map(e=>e.name),o=await u.copyToClipboard(e,t,{includeHeaders:!0});o.success?console.log(o.message):console.error(o.message)},V=async()=>{const e=await u.pasteFromClipboard();if(e.success&&e.rows&&e.rows.length>0){const t=Array.from(c.selectedCells);let o=c.rows.length;if(t.length>0){const e=t[0].split(":")[0],l=c.rows.findIndex(t=>t.rowId===e);l>=0&&(o=l)}e.rows.forEach((e,t)=>{var l;if(o+t<c.rows.length){const l=c.rows[o+t];Object.keys(e).forEach(t=>{T.value.some(e=>e.name===t)&&c.updateCell(l.rowId,t,e[t])})}else{const t=null==(l=c.rows[c.rows.length-1])?void 0:l.rowId;if(t){c.insertRow(t);const o=c.rows[c.rows.length-1];Object.keys(e).forEach(t=>{T.value.some(e=>e.name===t)&&c.updateCell(o.rowId,t,e[t])})}}}),console.log(e.message)}else console.error(e.message)},_=async()=>{await I();Array.from(c.selectedCells).forEach(e=>{var t;const[o,l]=e.split(":");(null==(t=T.value.find(e=>e.name===l))?void 0:t.isReadOnly)||c.updateCell(o,l,null)})},A=tt({enabled:!0,context:et.Normal});A.registerShortcuts(function(e){const t=[];return e.onCopy&&t.push({name:"Copy",key:ot("c"),handler:e.onCopy,description:"Copy selected cells",priority:100}),e.onPaste&&t.push({name:"Paste",key:ot("v"),handler:e.onPaste,description:"Paste from clipboard",priority:100}),e.onCut&&t.push({name:"Cut",key:ot("x"),handler:e.onCut,description:"Cut selected cells",priority:100}),e.onDelete&&t.push({name:"Delete",key:nt("Delete"),handler:e.onDelete,description:"Delete selected cells",priority:100}),e.onSelectAll&&t.push({name:"SelectAll",key:ot("a"),handler:e.onSelectAll,description:"Select all cells",priority:100}),e.onFind&&t.push({name:"Find",key:ot("f"),handler:e.onFind,description:"Open find dialog",priority:100}),e.onUndo&&t.push({name:"Undo",key:ot("z"),handler:e.onUndo,description:"Undo last action",priority:100}),e.onRedo&&t.push({name:"Redo",key:lt("z"),handler:e.onRedo,description:"Redo last undone action",priority:100}),e.onEscape&&t.push({name:"Escape",key:nt("Escape"),handler:e.onEscape,description:"Cancel current operation",priority:100}),e.onEnter&&t.push({name:"Enter",key:nt("Enter"),handler:e.onEnter,description:"Confirm edit and move to next row",context:"editing",priority:100}),e.onTab&&t.push({name:"Tab",key:nt("Tab"),handler:e.onTab,description:"Move to next cell",priority:100}),e.onArrowUp&&t.push({name:"ArrowUp",key:nt("ArrowUp"),handler:e.onArrowUp,description:"Move selection up",priority:50}),e.onArrowDown&&t.push({name:"ArrowDown",key:nt("ArrowDown"),handler:e.onArrowDown,description:"Move selection down",priority:50}),e.onArrowLeft&&t.push({name:"ArrowLeft",key:nt("ArrowLeft"),handler:e.onArrowLeft,description:"Move selection left",priority:50}),e.onArrowRight&&t.push({name:"ArrowRight",key:nt("ArrowRight"),handler:e.onArrowRight,description:"Move selection right",priority:50}),t}({onCopy:I,onPaste:V,onCut:_,onDelete:()=>{Array.from(c.selectedCells).forEach(e=>{var t;const[o,l]=e.split(":");(null==(t=T.value.find(e=>e.name===l))?void 0:t.isReadOnly)||c.updateCell(o,l,null)})},onSelectAll:()=>{c.rows.forEach(e=>{T.value.forEach(t=>{t.specialType||c.selectCell(e.rowId,t.name,!0)})})},onFind:()=>console.log("Find not implemented yet")}));const $=t.computed(()=>c.visibleRows),T=t.computed(()=>(Array.isArray(r.columns)&&r.columns.length>0?r.columns:c.columns).map(e=>e.specialType?e:{...e,minWidth:e.minWidth??50,maxWidth:e.maxWidth??200,isSortable:e.isSortable??!1,isFilterable:e.isFilterable??!1,visibleForGrid:e.visibleForGrid??!0}));function B(e){(e.ctrlKey||e.metaKey)&&("c"!==e.key&&"C"!==e.key||(e.preventDefault(),console.log("[DataGrid] Ctrl+C pressed - copying selected cells"),async function(){if(0===c.selectedCells.size)return void console.warn("[DataGrid] No cells selected for copy");console.log("[DataGrid] Copying selected cells:",{selectedCount:c.selectedCells.size,selectedCells:Array.from(c.selectedCells)});const e=await u.copySelectedCells(c.selectedCells,c.rows,L.value);e.success?console.log("[DataGrid] Copy successful:",e.message):console.error("[DataGrid] Copy failed:",e.message)}()),"v"!==e.key&&"V"!==e.key||(e.preventDefault(),console.log("[DataGrid] Ctrl+V pressed - pasting from clipboard"),async function(){const e=await u.pasteFromClipboard();if(e.success&&e.rows&&e.rows.length>0){console.log("[DataGrid] Paste successful:",{rowCount:e.rows.length,headers:e.headers});let t=0,o=0;if(c.selectedCells.size>0){const e=Array.from(c.selectedCells)[0],[l,n]=e.split(":"),r=c.rows.find(e=>e.rowId===l),a=L.value.findIndex(e=>e.name===n);r&&-1!==a&&(t=r.rowIndex,o=a)}console.log("[DataGrid] Pasting at position:",{targetRowIndex:t,targetColIndex:o}),e.rows.forEach((e,l)=>{const n=t+l;if(n>=c.rows.length)return void console.warn("[DataGrid] Paste row out of bounds:",{pasteRowIndex:n,maxRows:c.rows.length});const r=c.rows[n];Object.keys(e).forEach((t,l)=>{const a=o+l;if(a>=L.value.length)return void console.warn("[DataGrid] Paste column out of bounds:",{pasteColIndex:a,maxCols:L.value.length});const i=L.value[a],s=e[t];c.updateCell(r.rowId,i.name,s),console.log("[DataGrid] Pasted cell:",{row:n,col:a,columnName:i.name,value:s})})}),console.log("[DataGrid] Paste complete")}else console.error("[DataGrid] Paste failed:",e.message)}()))}async function D(){if(f.value){console.log("[validateAllCellsInBatches] âš ï¸ Validation already in progress, cancelling previous validation..."),w=!0;const e=Date.now();for(;f.value&&Date.now()-e<5e3;)await new Promise(e=>setTimeout(e,100));if(f.value)return void console.error("[validateAllCellsInBatches] âŒ Previous validation did not finish in time")}f.value=!0,w=!1;try{if(console.log("[validateAllCellsInBatches] ðŸ” START",{enableValidation:c.config.enableValidation,hasValidation:!!d,totalRows:c.rows.length,totalColumns:c.columns.length}),console.info("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.info("ðŸ” VALIDATION START"),console.info(`   Rows: ${c.rows.length}, Columns: ${c.columns.length}`),console.info("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),!c.config.enableValidation||!d)return void console.log("[validateAllCellsInBatches] âš ï¸ SKIPPED - validation not enabled or not available");const o=new Set;for(const[e,t]of d.validationRules.value.entries())t.length>0&&o.add(e);if(console.log("[validateAllCellsInBatches] ðŸ” Columns with rules:",{totalColumns:c.columns.length,columnsWithRules:o.size,columns:Array.from(o)}),0===o.size)return console.log("[validateAllCellsInBatches] âš ï¸ NO VALIDATION RULES - skipping validation entirely"),void console.log("[validateAllCellsInBatches] âœ… SKIPPED - 0 cells validated (no rules defined)");const l=c.getCellsNeedingValidation(!0,o);if(console.log("[validateAllCellsInBatches] ðŸ“‹ Cells needing validation:",{count:l.length,sample:l.slice(0,5).map(e=>`${e.rowId}:${e.columnName}`)}),0===l.length)return void console.log("[validateAllCellsInBatches] âœ… NO CELLS NEED VALIDATION - all cells already validated");v.value={isValidating:!0,current:0,total:l.length,percentage:0};const n=(e=l.length)<1e3?25:e<5e3?50:e<15e3?100:200;let r=0;console.log("[validateAllCellsInBatches] Starting PARALLEL batch validation...",{totalCells:l.length,parallelBatchSize:n,estimatedBatches:Math.ceil(l.length/n)});for(let e=0;e<l.length;e+=n){if(w)return void console.log("[validateAllCellsInBatches] âš ï¸ CANCELLED by user");const o=l.slice(e,e+n),a=Math.floor(e/n)+1;console.log(`[validateAllCellsInBatches] ðŸ“¦ Processing batch ${a} (PARALLEL):`,{batchSize:o.length,from:e,to:e+o.length});const i=o.map(({rowId:e,columnName:t})=>{const o=c.getRow(e);if(!o)return console.warn("[validateAllCellsInBatches] âš ï¸ Row not found:",e),Promise.resolve();const l=o.cells.find(e=>e.columnName===t);if(!l)return console.warn("[validateAllCellsInBatches] âš ï¸ Cell not found:",{rowId:e,columnName:t}),Promise.resolve();const n=o.cells.map(e=>({columnName:e.columnName,value:e.value}));return d.validateCellDirect(e,t,l.value,n,!0).then(()=>{c.markCellValidated(e,t),r++}).catch(o=>{console.error("[validateAllCellsInBatches] âŒ Validation error:",{rowId:e,columnName:t,err:o})})});await Promise.all(i),v.value.current=r,v.value.percentage=Math.round(r/l.length*100),await t.nextTick(),console.log(`[validateAllCellsInBatches] âœ“ Batch ${a} complete (PARALLEL):`,{validated:r,total:l.length,progress:`${v.value.percentage}%`})}d.updateErrorCount(),console.log("[validateAllCellsInBatches] ðŸŽ‰ COMPLETE:",{totalValidated:r,totalRequested:l.length,success:r===l.length}),console.info("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.info(`âœ… VALIDATION SUCCESS - ${r} cells validated`),console.info(`   Total errors: ${d.validationErrors.value.length}`),console.info("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•")}catch(Re){throw console.error("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.error("âŒ VALIDATION ERROR:",Re),console.error("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),Re}finally{f.value=!1,v.value.isValidating=!1,console.log("[validateAllCellsInBatches] ðŸ” END")}var e}function F(){(c.isDragging||c.pressedCell)&&c.endDragSelection()}t.onBeforeMount(()=>{i.info("ðŸ”„ Component before mount")}),t.onBeforeUnmount(()=>{i.info("ðŸ”„ Component before unmount - starting cleanup"),d&&(console.log("[DataGrid] Clearing validation state..."),d.clearValidationErrors(),d.validationRules.value.clear()),console.log("[DataGrid] Clearing store data..."),c.clearAllData(),i.info("âœ… Component cleanup complete")}),t.onUnmounted(()=>{i.info("ðŸ—‘ï¸ Component unmounted - final cleanup"),i.info("ðŸ‘‹ Component cleanup complete")}),t.watch(()=>c.config.autoValidate,async(e,t)=>{console.log("[DataGrid] autoValidate changed:",{wasEnabled:t,enabled:e}),e&&!t&&c.config.enableValidation&&(console.log("[DataGrid] Auto-validation enabled - validating all unvalidated cells"),await D())});const H=t.computed(()=>{const e=[],t=c.config;return t.showRowNumber&&e.push({name:"__rowNumber",header:"#",width:50,minWidth:40,maxWidth:80,isVisible:!0,isReadOnly:!0,isSortable:!1,isFilterable:!1,specialType:"RowNumber"}),t.showCheckbox&&e.push({name:"__checkbox",header:"â˜‘",width:40,minWidth:40,maxWidth:40,isVisible:!0,isReadOnly:!0,isSortable:!1,isFilterable:!0,specialType:"Checkbox"}),e}),P=t.computed(()=>{const e=[];return c.config.showValidationAlerts&&e.push({name:"__validationAlerts",header:"âš  Validation",width:200,minWidth:150,maxWidth:9999,autoWidth:!0,isVisible:!0,isReadOnly:!0,isSortable:!1,isFilterable:!1,specialType:"ValidationAlerts"}),e}),M=t.computed(()=>{const e=[],t=c.config;return t.showInsertButton&&e.push({name:"__insertRow",header:"Insert",width:60,minWidth:50,maxWidth:80,isVisible:!0,isReadOnly:!0,isSortable:!1,isFilterable:!1,specialType:"InsertRow"}),t.showDeleteButton&&e.push({name:"__deleteRow",header:"Delete",width:60,minWidth:50,maxWidth:80,isVisible:!0,isReadOnly:!0,isSortable:!1,isFilterable:!1,specialType:"DeleteRow"}),e}),L=t.computed(()=>[...H.value,...T.value.filter(e=>!e.specialType&&e.isVisible&&!1!==e.visibleForGrid),...P.value,...M.value]),G=t.computed(()=>{const e=L.value.map(e=>e.autoWidth?"1fr":`${e.width}px`).join(" ");return console.log("[GridTemplate] All Columns:",L.value.map(e=>({name:e.name,header:e.header,width:e.width,autoWidth:e.autoWidth,specialType:e.specialType}))),console.log("[GridTemplate] Generated Template:",e),e});function U(e,t){const o=c.columns.find(t=>t.name===e);o?o.isSortable?!1!==o.visibleForGrid?c.addSort(e,t,!1):console.warn(`[handleSort] Column '${e}' has visibleForGrid=false, sorting not allowed`):console.warn(`[handleSort] Column '${e}' is not sortable`):console.error(`[handleSort] Column not found: ${e}`)}function j(e,t){const o=c.columns.find(t=>t.name===e);o&&(o.width=t)}async function W(e,o,l){console.log(`[DataGrid] handleCellEditComplete: rowId=${e}, columnName=${o}, newValue=${l}, autoValidate=${c.config.autoValidate}, autoRowHeight=${c.isAutoRowHeightEnabled}`),c.updateCell(e,o,l);const n=c.columns.find(e=>e.name===o);if(n){if(!1===n.visibleForGrid)console.log("[DataGrid] handleCellEditComplete: Skipping validation - hidden column:",o);else if(c.config.autoValidate&&c.config.enableValidation&&d){if(d.validationRules.value.has(o)&&d.validationRules.value.get(o).length>0){const t=c.rows.find(t=>t.rowId===e),n=null==t?void 0:t.cells.map(e=>({columnName:e.columnName,value:e.value}));await d.validateCellThrottled(e,o,l,n);const r=d.validationErrors[e]&&d.validationErrors[e].length>0;console.log("[DataGrid] Cell validated after edit:",{rowId:e,columnName:o,hasErrors:r})}else console.log("[DataGrid] handleCellEditComplete: Skipping validation - no rules:",o)}c.isAutoRowHeightEnabled?(console.log("[DataGrid] Recalculating row height:",{rowId:e}),await ve(e),await t.nextTick()):(console.log("[DataGrid] Recalculating height for newlines (AutoRowHeight OFF):",{rowId:e}),await we(e))}else console.warn("[DataGrid] handleCellEditComplete: Column not found:",o)}async function q(e,o,l){console.log("[handleCellInput] Called:",{rowId:e,columnName:o,value:l,autoRowHeightEnabled:c.isAutoRowHeightEnabled}),c.updateCell(e,o,l),c.isAutoRowHeightEnabled?(await ve(e),await t.nextTick()):null!=l&&String(l).includes("\n")&&await we(e)}function K(e,t){c.toggleCheckbox(e,t)}function J(e){c.deleteRow(e)}function Q(e){c.insertRow(e)}function Y(e,t){c.insertMultipleRows(e,t,"above")}function X(e,t){c.insertMultipleRows(e,t,"below")}t.watch(()=>r.config,e=>{e&&c.setConfig(e)},{immediate:!0,deep:!0}),t.watch(()=>r.columns,e=>{if(console.log("[DataGrid] Columns watch triggered:",{hasColumns:null==e?void 0:e.length,rowsLength:c.rows.length,willInitialize:e&&e.length>0&&0===c.rows.length}),e&&e.length>0)try{c.setColumns(e),console.log("[DataGrid] After setColumns, rowsLength:",c.rows.length),0===c.rows.length?(console.log("[DataGrid] Calling initializeEmptyRows..."),c.initializeEmptyRows(),console.log("[DataGrid] After initializeEmptyRows, rowsLength:",c.rows.length)):console.log("[DataGrid] SKIPPED initializeEmptyRows - rows already exist!")}catch(Re){console.error("[DataGrid] Failed to set columns:",Re),alert(`Column configuration error: ${Re instanceof Error?Re.message:"Unknown error"}`)}},{immediate:!0,deep:!0}),t.watch(()=>{var e;return(null==(e=null==d?void 0:d.ruleCount)?void 0:e.value)??0},async(e,o)=>{var l,n;const r=(null==(n=null==(l=null==d?void 0:d.validationRules)?void 0:l.value)?void 0:n.size)||0;if(console.log("[WATCHER] Validation rules changed!",{ruleCount:e,oldCount:o,hasRules:r>0,hasData:c.rows.length>0,autoValidateEnabled:c.config.autoValidate}),0!==r&&0!==c.rows.length&&c.config.autoValidate){console.log("[WATCHER] Triggering auto-validation for all rows..."),c.clearValidationTracking();try{await t.nextTick(),console.log("[WATCHER] First nextTick done"),await t.nextTick(),console.log("[WATCHER] Second nextTick done"),await D(),console.log("[WATCHER] âœ… Auto-validation completed after adding rules")}catch(Re){console.error("[WATCHER] âŒ Error during auto-validation:",Re)}}else console.log("[WATCHER] Skipping auto-validation:",{noRules:0===r,noData:0===c.rows.length,autoValidateDisabled:!c.config.autoValidate})}),t.watch(()=>{var e;return(null==(e=null==d?void 0:d.errorCount)?void 0:e.value)??0},async(e,o)=>{const l=null==d?void 0:d.validationErrors;console.log("[WATCHER] Validation errors changed!",{errorCount:e,oldErrorCount:o,hasErrors:e>0,isAutoRowHeightEnabled:c.isAutoRowHeightEnabled,validationErrorsKeys:l?Object.keys(l):[]}),console.log("[WATCHER] Updating validationErrorCount for all rows..."),c.rows.forEach(e=>{const t=l&&l[e.rowId]?l[e.rowId].length:0;e.validationErrorCount=t,(t>0||e.validationErrorCount!==t)&&console.log("[WATCHER] Updated validationErrorCount:",{rowId:e.rowId,count:t})}),l&&0!==e?(await t.nextTick(),c.isAutoRowHeightEnabled?(console.log("[WATCHER] AutoRowHeight is ON, calling applyAutoRowHeightToAll..."),await ge(),console.log("[WATCHER] applyAutoRowHeightToAll completed")):(console.log("[WATCHER] AutoRowHeight is OFF, calling resetAllRowHeights..."),await fe(),console.log("[WATCHER] resetAllRowHeights completed"))):console.log("[WATCHER] No validation errors, heights updated, done.")});const Z=t.computed(()=>T.value.filter(e=>!e.isVisible&&!e.specialType&&!1!==e.visibleForGrid));function ee(e){const t=T.value.find(t=>t.name===e);t&&!t.specialType&&(t.isVisible=!1,console.log(`Hidden column: ${e}`))}function te(){T.value.forEach(e=>{e.specialType||(e.isVisible=!0)}),console.log("Shown all columns")}function oe(e){const t=T.value.find(t=>t.name===e);if(!t)return;const o=document.createElement("canvas").getContext("2d");if(!o)return;o.font="14px system-ui, -apple-system, sans-serif";let l=0;const n=o.measureText(t.header).width;l=Math.max(l,n+40),c.rows.forEach(t=>{const n=t.cells.find(t=>t.columnName===e),r=null==n?void 0:n.value,a=(null==r?void 0:r.toString())??"";if(a){const e=o.measureText(a).width;l=Math.max(l,e+24)}});const r=Math.max(t.minWidth,Math.min(t.maxWidth,Math.ceil(l)));t.width=r,console.log(`Auto-fit column ${e}: ${r}px (measured: ${Math.ceil(l)}px)`)}const le=t.ref({visible:!1,columnName:"",position:{x:0,y:0},uniqueValues:[],mode:"checkbox",pattern:""});function ne(e,t){if(null==e)return null;if("simple"===e.type){return e.columnName===t?null:e}const o=e;if(!o.left||!o.right)return console.error("[extractFiltersExceptColumn] Invalid composite filter - missing children:",o),null;const l=ne(o.left,t),n=ne(o.right,t);return l||n?l?n?{type:"composite",left:l,right:n,operator:o.operator}:l:n:null}function re(e,t){const o=new Set;if(null==e)return o;return function e(l){if("simple"===l.type){const e=l;e.columnName===t&&"Equals"===e.operator&&o.add(String(e.value))}else{const t=l;e(t.left),e(t.right)}}(e),o}function ae(e){try{if(console.log(`[handleShowFilter] START for column: ${e}`),!m.value)return console.error("[handleShowFilter] Grid not ready yet"),void alert("Please wait for the grid to finish loading before opening filters.");if(g.value)return console.error("[handleShowFilter] Grid is currently processing data"),void alert("Please wait while data is being processed...");const t=T.value.find(t=>t.name===e);if(!t)return void console.error(`[handleShowFilter] Column not found: ${e}`);if(!t.isFilterable)return void console.warn(`[handleShowFilter] Column '${e}' is not filterable`);if(!1===t.visibleForGrid)return void console.warn(`[handleShowFilter] Column '${e}' has visibleForGrid=false, filtering not allowed`);if(!c||!c.rows||0===c.rows.length)return console.error("[handleShowFilter] Store not initialized or no data"),void alert("Please load data before opening filters.");const o=function(e){try{if(console.log(`[getUniqueValues] Starting for column: ${e}`),!c||!c.rows)return console.warn("[getUniqueValues] Store or rows not initialized yet, returning empty array"),[];if("__checkbox"===e){const t=ne(c.filterExpression,e);console.log(`[getUniqueValues] Checkbox - Has filters to apply: ${!!t}`);const o=c.rows;console.log(`[getUniqueValues] Checkbox - Total rows before filtering: ${o.length}`);const l=t?p(o,t,c):o;console.log(`[getUniqueValues] Checkbox - Total rows after filtering: ${l.length}`);const n=Math.min(3,l.length);for(let e=0;e<n;e++){const t=l[e].cells.find(e=>"__checkbox"===e.columnName);console.log(`[getUniqueValues] Checkbox - Row ${e}: cell=${!!t}, value=${null==t?void 0:t.value}, type=${typeof(null==t?void 0:t.value)}`)}const r=l.filter(e=>c.isRowChecked(e.rowId)).length,a=l.length-r,i=re(c.filterExpression,e);return console.log(`[getUniqueValues] Checkbox column: true=${r}, false=${a}, selected=${Array.from(i)}`),[{value:"true",isSelected:i.has("true"),count:r,displayText:`â˜‘ Checked (${r})`},{value:"false",isSelected:i.has("false"),count:a,displayText:`â˜ Unchecked (${a})`}]}const t=new Map,o=ne(c.filterExpression,e);console.log(`[getUniqueValues] Has filters to apply for '${e}': ${!!o}`);const l=c.rows,n=o?p(l,o,c):l;console.log(`[getUniqueValues] Column=${e}, AllRows=${l.length}, FilteredRows=${n.length}`),n.forEach(o=>{var l;const n=o.cells.find(t=>t.columnName===e),r=(null==(l=null==n?void 0:n.value)?void 0:l.toString())??"";t.set(r,(t.get(r)||0)+1)});const r=re(c.filterExpression,e);console.log(`[getUniqueValues] Column=${e}, UniqueValues=${t.size}, SelectedValues=${r.size}`);const a=Array.from(t.entries()).map(([e,t])=>{const o=""===e?"(Empty)":e;return{value:e,isSelected:r.has(e),count:t,displayText:`${o} (${t})`}}).sort((e,t)=>""===e.value&&""!==t.value?1:""!==e.value&&""===t.value?-1:e.value.localeCompare(t.value));return console.log(`[getUniqueValues] Returning ${a.length} unique values`),a}catch(Re){return console.error(`[getUniqueValues] ERROR for column '${e}':`,Re),console.error("[getUniqueValues] Filter expression at time of error:",c.filterExpression),console.error("[getUniqueValues] Stack trace:",Re instanceof Error?Re.stack:"No stack trace"),[]}}(e);console.log(`[handleShowFilter] Got ${o.length} unique values`);const l={x:window.innerWidth/2-200,y:window.innerHeight/2-300};le.value={visible:!0,columnName:e,position:l,uniqueValues:o,mode:"checkbox",pattern:""},console.log("[handleShowFilter] Filter flyout opened successfully")}catch(Re){console.error(`[handleShowFilter] CRITICAL ERROR for column '${e}':`,Re),console.error("[handleShowFilter] Stack trace:",Re instanceof Error?Re.stack:"No stack trace"),alert(`Error opening filter for column '${e}': ${Re instanceof Error?Re.message:String(Re)}`)}}function ie(){le.value.visible=!1}function se(e){const t=new Map;return e&&function e(o,l){if("simple"===o.type){const e=o;return l&&t.set(e.columnName,o),e.columnName}{const n=o;if("AND"===n.operator)return e(n.left,!0),e(n.right,!0),null;{const r=e(n.left,!1),a=e(n.right,!1),i=r||a;return i&&l&&t.set(i,o),i}}}(e,!0),t}function ce(e){const t=e.filter(e=>null!=e);if(0===t.length)return null;if(1===t.length)return t[0];let o=t[0];for(let l=1;l<t.length;l++)o={type:"composite",left:o,right:t[l],operator:"AND"};return o}function de(e,t){const o=se(c.filterExpression);o.set(t,e);return ce(Array.from(o.values()))||e}function ue(e){const t=le.value.columnName;if(0===e.length){const e=se(c.filterExpression);if(e.delete(t),0===e.size)c.clearFilter();else{const t=ce(Array.from(e.values()));c.setFilter(t)}}else{const o="__checkbox"===t?e.map(e=>"true"===e):e;let l;if(1===o.length)l={type:"simple",columnName:t,operator:"Equals",value:o[0]};else{l={type:"simple",columnName:t,operator:"Equals",value:o[0]};for(let e=1;e<o.length;e++)l={type:"composite",left:l,right:{type:"simple",columnName:t,operator:"Equals",value:o[e]},operator:"OR"}}const n=de(l,t);c.setFilter(n)}console.log(`Applied checkbox filter to ${t}:`,e,"Final filter:",c.filterExpression)}function pe(e){const t=le.value.columnName;if(!e){const e=se(c.filterExpression);if(e.delete(t),0===e.size)c.clearFilter();else{const t=ce(Array.from(e.values()));c.setFilter(t)}return}const o=de({type:"simple",columnName:t,operator:"Contains",value:e},t);c.setFilter(o),console.log(`Applied text contains filter to ${t}:`,e,"Final filter:",c.filterExpression)}function he(){const e=le.value.columnName,t=se(c.filterExpression);if(t.delete(e),0===t.size)c.clearFilter();else{const e=ce(Array.from(t.values()));c.setFilter(e)}console.log(`Cleared filter for ${e}`,"Final filter:",c.filterExpression)}async function me(){try{console.log("[toggleAutoRowHeight] ========== FUNCTION CALLED =========="),console.log(`[toggleAutoRowHeight] Current state: ${c.isAutoRowHeightEnabled}`),console.log("[toggleAutoRowHeight] Rows BEFORE:",c.rows.slice(0,5).map(e=>({id:e.rowId,height:e.height})));const e=!c.isAutoRowHeightEnabled;console.log(`[toggleAutoRowHeight] New state will be: ${e}`),c.setAutoRowHeightEnabled(e),console.log("[toggleAutoRowHeight] Store updated"),e?(console.log("[toggleAutoRowHeight] Enabled - applying heights to all rows..."),await ge(),console.log("[toggleAutoRowHeight] Heights applied successfully")):(console.log("[toggleAutoRowHeight] Disabled - resetting all row heights..."),await fe(),console.log("[toggleAutoRowHeight] Heights reset successfully")),console.log("[toggleAutoRowHeight] Rows AFTER:",c.rows.slice(0,5).map(e=>({id:e.rowId,height:e.height}))),console.log("[toggleAutoRowHeight] ========== FUNCTION COMPLETED ==========")}catch(Re){console.log(`[toggleAutoRowHeight] âŒ ERROR: ${Re}`),console.log(`[toggleAutoRowHeight] Error stack: ${Re instanceof Error?Re.stack:"N/A"}`)}}async function ge(){const e=L.value.filter(e=>!e.specialType||"ValidationAlerts"!==e.specialType).map(e=>({name:e.name,width:e.width,specialType:e.specialType}));console.log("[applyAutoRowHeightToAll] ========== START =========="),console.log("[applyAutoRowHeightToAll] AutoRowHeight is ON");const o=c.rows.map(e=>({rowId:e.rowId,heightBefore:e.height}));console.log("[applyAutoRowHeightToAll] BEFORE - All row heights:",o.slice(0,10)),console.log("[applyAutoRowHeightToAll] Measuring columns:",e.map(e=>`${e.name} (${e.width}px, special: ${e.specialType||"none"})`).join(", "));const l=await C.applyAutoRowHeight(c.rows,e),n=c.rows.map((e,t)=>({rowId:e.rowId,heightBefore:o[t].heightBefore,heightAfter:e.height,changed:o[t].heightBefore!==e.height}));console.log("[applyAutoRowHeightToAll] AFTER - All row heights (first 10):",n.slice(0,10)),console.log("[applyAutoRowHeightToAll] Changed rows:",n.filter(e=>e.changed).length),console.log(`[applyAutoRowHeightToAll] Summary: ${l.totalRowsUpdated} rows updated, average height: ${l.averageHeight.toFixed(1)}px`),await t.nextTick(),console.log("[applyAutoRowHeightToAll] First nextTick complete"),await t.nextTick(),console.log("[applyAutoRowHeightToAll] Second nextTick complete"),await t.nextTick(),console.log("[applyAutoRowHeightToAll] Third nextTick complete"),await new Promise(e=>setTimeout(e,50)),console.log("[applyAutoRowHeightToAll] Delay complete, calling forceUpdate..."),x.value?(x.value.forceUpdate(),console.log("[applyAutoRowHeightToAll] DynamicScroller forceUpdate() called")):console.log("[applyAutoRowHeightToAll] ERROR: scrollerRef is null, cannot forceUpdate"),console.log("[applyAutoRowHeightToAll] ========== COMPLETE ==========")}async function fe(){console.log("[resetAllRowHeights] START - AutoRowHeight is OFF, resetting to default height");let e=0;c.rows.forEach(t=>{t.height=32,e++}),console.log("[resetAllRowHeights] Summary:",{totalRows:e,resetToHeight:32}),console.log("[resetAllRowHeights] All row heights reset to default"),await t.nextTick(),console.log("[resetAllRowHeights] First nextTick complete"),await t.nextTick(),console.log("[resetAllRowHeights] Second nextTick complete"),await t.nextTick(),console.log("[resetAllRowHeights] Third nextTick complete"),await new Promise(e=>setTimeout(e,50)),console.log("[resetAllRowHeights] Delay complete, calling forceUpdate..."),x.value?(x.value.forceUpdate(),console.log("[resetAllRowHeights] DynamicScroller forceUpdate() called")):console.log("[resetAllRowHeights] ERROR: scrollerRef is null, cannot forceUpdate"),console.log("[resetAllRowHeights] COMPLETE")}async function ve(e){if(!c.isAutoRowHeightEnabled)return;const o=L.value.filter(e=>!e.specialType||"ValidationAlerts"!==e.specialType).map(e=>({name:e.name,width:e.width,specialType:e.specialType})),l=c.rows.find(t=>t.rowId===e);if(!l)return;C.recalculateRows(c.rows,[e],o)>0&&l&&(c.updateRowHeight(e,l.height),await t.nextTick())}async function we(e){const o=c.rows.find(t=>t.rowId===e);if(!o)return;let l=1;for(const t of o.cells){if(null==t.value)continue;const e=String(t.value);if(e.includes("\n")){const t=e.split("\n").length;l=Math.max(l,t)}}const n=21*l+10;c.updateRowHeight(e,n),await t.nextTick()}async function ye(){i.debug("ðŸ”Œ Checking backend connection...");try{E.value=await ut.healthCheck(),E.value?i.info("âœ… Backend connected"):i.warn("âš ï¸ Backend disconnected")}catch(Re){i.error("âŒ Backend connection check failed",{error:(null==Re?void 0:Re.message)||(null==Re?void 0:Re.toString())||"Unknown error",stack:null==Re?void 0:Re.stack}),E.value=!1}}const be=o.useDebounceFn(async function(){var e,o,l;if(console.log("[loadDataFromBackend] ðŸ”µ START"),g.value)console.log("[loadDataFromBackend] âš ï¸ Already processing, skipping");else{S.value=!0,g.value=!0,N.value={isLoading:!0,operation:"Loading data from backend...",progress:0,total:0,percentage:0},console.info("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.info("ðŸ“¥ DATA LOADING START"),console.info("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");try{console.log("[loadDataFromBackend] Calling gridApi.getData()...");const n=await ut.getData();if(console.log("[loadDataFromBackend] Response received:",{success:n.success,dataLength:null==(e=n.data)?void 0:e.length,hasError:!!n.error}),n.success&&n.data){N.value.operation="Processing data...",N.value.total=n.data.length,console.log("[loadDataFromBackend] Converting data format...");const e=n.data.map((e,t)=>({__rowId:e.RowId||`row-${Date.now()}-${t}`,__rowHeight:e.RowHeight||40,__checkbox:e.Checkbox,...e.Data}));if(console.log("[loadDataFromBackend] Converted rows:",e.length),N.value.progress=e.length,N.value.percentage=100,console.log("[loadDataFromBackend] Calling clearValidationTracking()..."),c.clearValidationTracking(),console.log("[loadDataFromBackend] Calling store.loadRows()..."),c.loadRows(e),console.log(`[loadDataFromBackend] âœ… Loaded ${e.length} rows from backend`),N.value.operation="Data loaded successfully",console.info("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.info(`âœ… DATA LOADING SUCCESS - ${e.length} rows loaded`),console.info("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),c.config.autoValidate&&c.config.enableValidation){const e=(null==(l=null==(o=null==d?void 0:d.validationRules)?void 0:o.value)?void 0:l.size)||0;console.log("[loadDataFromBackend] Auto-validation check:",{autoValidate:c.config.autoValidate,enableValidation:c.config.enableValidation,rulesCount:e}),e>0?(console.log("[loadDataFromBackend] Starting auto-validation..."),await t.nextTick(),console.log("[loadDataFromBackend] First nextTick done - rows mounted"),await t.nextTick(),console.log("[loadDataFromBackend] Second nextTick done - scroller ready"),await new Promise(e=>setTimeout(e,50)),console.log("[loadDataFromBackend] Delay done - starting validation"),await D(),console.log("[loadDataFromBackend] âœ… Auto-validation complete")):console.log("[loadDataFromBackend] âš ï¸ Skipping validation - no rules defined yet")}else console.log("[loadDataFromBackend] âš ï¸ Auto-validation disabled in config")}else console.error("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.error("âŒ DATA LOADING ERROR:",n.error),console.error("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),alert(`Failed to load data: ${n.error}`)}catch(Re){console.error("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),console.error("ðŸ’¥ DATA LOADING FATAL EXCEPTION:",Re),console.error("â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"),alert(`Error loading data: ${Re instanceof Error?Re.message:"Unknown error"}`)}finally{S.value=!1,g.value=!1,N.value.isLoading=!1,console.log("[loadDataFromBackend] ðŸ”µ END")}}},1e3,{maxWait:2e3});async function Ce(){R.value=!0;try{const e=T.value.filter(e=>!e.specialType&&!1!==e.visibleForGrid),t=[];let o=0;for(const n of c.rows){if(!e.some(e=>{const t=n.cells.find(t=>t.columnName===e.name),o=null==t?void 0:t.value;return null!=o&&""!==o})){o++;continue}const l={};T.value.forEach(e=>{if(!e.specialType){const t=n.cells.find(t=>t.columnName===e.name);t&&(l[e.name]=t.value)}}),t.push(l)}console.log("[saveDataToBackend] ðŸ“¦ Data prepared:",{totalRows:c.rows.length,savedRows:t.length,skippedEmptyRows:o,filterRate:`${Math.round(o/c.rows.length*100)}%`});const l=await ut.importData(t);l.success?console.log(`âœ… Saved ${t.length} rows to backend`):(console.error("âŒ Failed to save data to backend:",l.error),alert(`Failed to save data: ${l.error}`))}catch(Re){console.error("Error saving data to backend:",Re),alert(`Error saving data: ${Re instanceof Error?Re.message:"Unknown error"}`)}finally{R.value=!1}}const ke=t.computed(()=>{var e,t,o,l,n,a,i,s;return{...pt,cellColors:{...pt.cellColors,...(null==(e=r.theme)?void 0:e.cellColors)||{}},rowColors:{...pt.rowColors,...(null==(t=r.theme)?void 0:t.rowColors)||{}},headerColors:{...pt.headerColors,...(null==(o=r.theme)?void 0:o.headerColors)||{}},validationColors:{...pt.validationColors,...(null==(l=r.theme)?void 0:l.validationColors)||{}},selectionColors:{...pt.selectionColors,...(null==(n=r.theme)?void 0:n.selectionColors)||{}},borderColors:{...pt.borderColors,...(null==(a=r.theme)?void 0:a.borderColors)||{}},specialColumnColors:{...pt.specialColumnColors,...(null==(i=r.theme)?void 0:i.specialColumnColors)||{}},uiControlColors:{...pt.uiControlColors,...(null==(s=r.theme)?void 0:s.uiControlColors)||{}}}}),Ee=t.computed(()=>{var e;return{...{"--dg-cell-bg":(e=ke.value).cellColors.defaultBackground,"--dg-cell-fg":e.cellColors.defaultForeground,"--dg-cell-hover-bg":e.cellColors.hoverBackground,"--dg-cell-hover-fg":e.cellColors.hoverForeground,"--dg-cell-focused-bg":e.cellColors.focusedBackground,"--dg-cell-focused-fg":e.cellColors.focusedForeground,"--dg-cell-disabled-bg":e.cellColors.disabledBackground,"--dg-cell-disabled-fg":e.cellColors.disabledForeground,"--dg-cell-readonly-bg":e.cellColors.readOnlyBackground,"--dg-cell-readonly-fg":e.cellColors.readOnlyForeground,"--dg-row-even-bg":e.rowColors.evenRowBackground,"--dg-row-odd-bg":e.rowColors.oddRowBackground,"--dg-row-hover-bg":e.rowColors.hoverBackground,"--dg-row-selected-bg":e.rowColors.selectedBackground,"--dg-row-selected-fg":e.rowColors.selectedForeground,"--dg-row-selected-inactive-bg":e.rowColors.selectedInactiveBackground,"--dg-row-selected-inactive-fg":e.rowColors.selectedInactiveForeground,"--dg-header-bg":e.headerColors.background,"--dg-header-fg":e.headerColors.foreground,"--dg-header-hover-bg":e.headerColors.hoverBackground,"--dg-header-pressed-bg":e.headerColors.pressedBackground,"--dg-header-sort-indicator":e.headerColors.sortIndicatorColor,"--dg-validation-error-bg":e.validationColors.errorBackground,"--dg-validation-error-fg":e.validationColors.errorForeground,"--dg-validation-error-border":e.validationColors.errorBorder,"--dg-validation-warning-bg":e.validationColors.warningBackground,"--dg-validation-warning-fg":e.validationColors.warningForeground,"--dg-validation-warning-border":e.validationColors.warningBorder,"--dg-validation-info-bg":e.validationColors.infoBackground,"--dg-validation-info-fg":e.validationColors.infoForeground,"--dg-validation-info-border":e.validationColors.infoBorder,"--dg-selection-border":e.selectionColors.selectionBorder,"--dg-selection-fill":e.selectionColors.selectionFill,"--dg-multi-selection-bg":e.selectionColors.multiSelectionBackground,"--dg-multi-selection-fg":e.selectionColors.multiSelectionForeground,"--dg-border-cell":e.borderColors.cellBorder,"--dg-border-row":e.borderColors.rowBorder,"--dg-border-column":e.borderColors.columnBorder,"--dg-border-grid":e.borderColors.gridBorder,"--dg-border-focused-cell":e.borderColors.focusedCellBorder,"--dg-special-rownumber-bg":e.specialColumnColors.rowNumberBackground,"--dg-special-rownumber-fg":e.specialColumnColors.rowNumberForeground,"--dg-special-checkbox-border":e.specialColumnColors.checkboxBorder,"--dg-special-checkbox-bg":e.specialColumnColors.checkboxBackground,"--dg-special-checkbox-fg":e.specialColumnColors.checkboxForeground,"--dg-special-delete-bg":e.specialColumnColors.deleteRowBackground,"--dg-special-delete-fg":e.specialColumnColors.deleteRowForeground,"--dg-special-delete-hover-bg":e.specialColumnColors.deleteRowHoverBackground,"--dg-special-insert-bg":e.specialColumnColors.insertRowBackground,"--dg-special-insert-fg":e.specialColumnColors.insertRowForeground,"--dg-special-insert-border":e.specialColumnColors.insertRowBorder,"--dg-special-insert-hover-bg":e.specialColumnColors.insertRowHoverBackground,"--dg-special-insert-hover-fg":e.specialColumnColors.insertRowHoverForeground,"--dg-special-validation-error-bg":e.specialColumnColors.validationAlertsErrorBackground,"--dg-special-validation-error-fg":e.specialColumnColors.validationAlertsErrorForeground,"--dg-ui-resize-grip":e.uiControlColors.resizeGripColor,"--dg-ui-menu-bg":e.uiControlColors.menuBackground,"--dg-ui-menu-fg":e.uiControlColors.menuForeground,"--dg-ui-menu-hover-bg":e.uiControlColors.menuHoverBackground,"--dg-ui-dialog-bg":e.uiControlColors.dialogBackground,"--dg-ui-dialog-fg":e.uiControlColors.dialogForeground,"--dg-ui-dialog-border":e.uiControlColors.dialogBorder,"--dg-ui-placeholder":e.uiControlColors.placeholderColor,"--dg-ui-search-bg":e.uiControlColors.searchPanelBackground,"--dg-ui-search-fg":e.uiControlColors.searchPanelForeground,"--dg-ui-search-border":e.uiControlColors.searchPanelBorder,"--dg-ui-filter-bg":e.uiControlColors.filterRowBackground,"--dg-ui-filter-fg":e.uiControlColors.filterRowForeground,"--dg-ui-filter-border":e.uiControlColors.filterRowBorder,"--dg-ui-pagination-bg":e.uiControlColors.paginationBackground,"--dg-ui-pagination-fg":e.uiControlColors.paginationForeground,"--dg-ui-pagination-border":e.uiControlColors.paginationBorder,"--dg-ui-pagination-button-hover-bg":e.uiControlColors.paginationButtonHoverBackground},"--dg-min-table-width":r.minTableWidth?`${r.minTableWidth}px`:"fit-content",width:r.width||"100%",height:r.height||"600px"}}),Se={...d,async validateRequired(){if(!c.config.enableValidation)return!0;const e=c.getCellsNeedingValidation();if(0===e.length)return c.areNonEmptyRowsValid();for(const{rowId:t,columnName:o}of e){const e=c.rows.find(e=>e.rowId===t);if(!e)continue;const l=e.cells.find(e=>e.columnName===o);l&&(await d.validateCell(t,o,l.value),c.markCellValidated(t,o))}return c.areNonEmptyRowsValid()},isAllValid:()=>c.areNonEmptyRowsValid(),async validateAll(e){if(!c.config.enableValidation)return{isValid:!0,totalErrors:0};const t=await d.validateAll(e||c.rows);c.clearValidationTracking();for(const o of c.rows)for(const e of o.cells)c.markCellValidated(e.rowId,e.columnName);return t}};return l({loadDataFromBackend:be,validation:Se,copyPaste:u,shortcuts:A,handleCopy:I,handlePaste:V,handleCut:_}),(o,l)=>(t.openBlock(),t.createElementBlock("div",{class:"data-grid",style:t.normalizeStyle(Ee.value)},[g.value?(t.openBlock(),t.createElementBlock("div",Zt,[t.createElementVNode("div",eo,[l[1]||(l[1]=t.createElementVNode("div",{class:"processing-spinner"},null,-1)),t.createElementVNode("div",to,"Processing "+t.toDisplayString(t.unref(c).rows.length)+" rows...",1),v.value.isValidating?(t.openBlock(),t.createElementBlock("div",oo,[t.createElementVNode("div",lo,[t.createElementVNode("div",{class:"progress-bar",style:t.normalizeStyle({width:v.value.percentage+"%"})},null,4)]),t.createElementVNode("div",no,t.toDisplayString(v.value.current)+" / "+t.toDisplayString(v.value.total)+" cells validated ("+t.toDisplayString(v.value.percentage)+"%) ",1)])):t.createCommentVNode("",!0)])])):t.createCommentVNode("",!0),N.value.isLoading?(t.openBlock(),t.createElementBlock("div",ro,[t.createElementVNode("div",ao,[l[2]||(l[2]=t.createElementVNode("div",{class:"loading-spinner"},null,-1)),t.createElementVNode("div",io,t.toDisplayString(N.value.operation),1),N.value.total>0?(t.openBlock(),t.createElementBlock("div",so,[t.createElementVNode("div",co,[t.createElementVNode("div",{class:"progress-bar",style:t.normalizeStyle({width:N.value.percentage+"%"})},null,4)]),t.createElementVNode("div",uo,t.toDisplayString(N.value.progress)+" / "+t.toDisplayString(N.value.total)+" ("+t.toDisplayString(N.value.percentage)+"%) ",1)])):t.createCommentVNode("",!0)])])):t.createCommentVNode("",!0),t.createElementVNode("div",po,[t.createElementVNode("div",ho,[t.createElementVNode("button",{class:t.normalizeClass(["toolbar-button",{"toolbar-button--active":t.unref(c).isAutoRowHeightEnabled}]),onClick:me,title:t.unref(c).isAutoRowHeightEnabled?"Disable auto row height":"Enable auto row height"}," ðŸ“ Auto Height "+t.toDisplayString(t.unref(c).isAutoRowHeightEnabled?"ON":"OFF"),11,mo)]),t.createElementVNode("div",go,[t.createElementVNode("button",{class:t.normalizeClass(["toolbar-button",{"toolbar-button--disabled":!E.value}]),disabled:S.value||!E.value,onClick:l[0]||(l[0]=(...e)=>t.unref(be)&&t.unref(be)(...e)),title:"Load data from backend"},t.toDisplayString(S.value?"â³ Loading...":"â¬‡ï¸ Load from Backend"),11,fo),t.createElementVNode("button",{class:t.normalizeClass(["toolbar-button",{"toolbar-button--disabled":!E.value}]),disabled:R.value||!E.value,onClick:Ce,title:"Save data to backend"},t.toDisplayString(R.value?"â³ Saving...":"â¬†ï¸ Save to Backend"),11,vo),t.createElementVNode("span",{class:t.normalizeClass(["connection-status",{"connection-status--connected":E.value,"connection-status--disconnected":!E.value}]),onClick:ye,title:"Click to refresh connection status"},t.toDisplayString(E.value?"ðŸŸ¢ Connected":"ðŸ”´ Disconnected"),3)])]),!1!==e.showHiddenColumnsPanel&&Z.value.length>0?(t.openBlock(),t.createElementBlock("div",wo,[l[3]||(l[3]=t.createElementVNode("span",{class:"hidden-columns-label"},"Hidden columns:",-1)),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(Z.value,e=>(t.openBlock(),t.createElementBlock("button",{key:e.name,class:"show-column-button",onClick:t=>function(e){const t=T.value.find(t=>t.name===e);t&&(t.isVisible=!0,console.log(`Shown column: ${e}`))}(e.name),title:`Show column: ${e.header}`},t.toDisplayString(e.header),9,yo))),128)),t.createElementVNode("button",{class:"show-all-button",onClick:te,title:"Show all columns"}," Show All ")])):t.createCommentVNode("",!0),t.createElementVNode("div",bo,[t.createVNode(Ct,{columns:L.value,"grid-template-columns":G.value,"grid-id":t.unref(a),"is-grid-ready":m.value,"is-processing":g.value,"show-hidden-columns-panel":e.showHiddenColumnsPanel,onSort:U,onResize:j,onHideColumn:ee,onAutoFitColumn:oe,onShowFilter:ae},null,8,["columns","grid-template-columns","grid-id","is-grid-ready","is-processing","show-hidden-columns-panel"]),t.createVNode(t.unref(z),{ref_key:"scrollerRef",ref:x,items:$.value,"min-item-size":40,buffer:200,"key-field":"rowId",class:"scroller"},{default:t.withCtx(({item:e,index:o,active:l})=>[t.createVNode(t.unref(O),{item:e,active:l,"size-dependencies":[e.height,e.cells.length,e.validationErrorCount],"data-index":o},{default:t.withCtx(()=>[t.createVNode(_t,{row:e,columns:L.value,"grid-template-columns":G.value,"grid-id":t.unref(a),onCellEditComplete:W,onCellInput:q,onCheckboxChange:K,onDeleteRow:J,onInsertRow:Q,onInsertAbove:Y,onInsertBelow:X},null,8,["row","columns","grid-template-columns","grid-id"])]),_:2},1032,["item","active","size-dependencies","data-index"])]),_:1},8,["items"])]),t.createVNode(Mt,{"page-size":t.unref(c).pageSize,"page-size-options":t.unref(c).config.pageSizeOptions,"total-rows":t.unref(c).totalRows,"current-page":t.unref(c).currentPage,onPageChange:t.unref(c).goToPage,onPageSizeChange:t.unref(c).setPageSize},null,8,["page-size","page-size-options","total-rows","current-page","onPageChange","onPageSizeChange"]),t.createVNode(Xt,{visible:le.value.visible,"column-name":le.value.columnName,position:le.value.position,"unique-values":le.value.uniqueValues,"current-mode":le.value.mode,"current-pattern":le.value.pattern,onClose:ie,onApplyCheckbox:ue,onApplyRegex:pe,onClearFilter:he},null,8,["visible","column-name","position","unique-values","current-mode","current-pattern"])],4))}}),[["__scopeId","data-v-a910b5e3"]]),ko={class:"listbox-container"},Eo={key:0,class:"listbox-title"},So=["onClick","onMouseenter"],Ro=["checked","onClick"],No={class:"listbox-item-text"},xo=bt(t.defineComponent({__name:"ListBox",props:{items:{},title:{default:""},multiSelect:{type:Boolean,default:!1},preSelected:{default:()=>[]},height:{default:200},width:{default:250},theme:{}},emits:["selectionChange"],setup(e,{expose:o,emit:l}){const n=e,r=l,a=t.ref(new Set),i=t.ref(null);t.watch(()=>n.preSelected,e=>{a.value=new Set(e)},{immediate:!0});const s=t.computed(()=>{var e,t,o,l;return{...ht,itemColors:{...ht.itemColors,...(null==(e=n.theme)?void 0:e.itemColors)||{}},containerColors:{...ht.containerColors,...(null==(t=n.theme)?void 0:t.containerColors)||{}},checkboxColors:{...ht.checkboxColors,...(null==(o=n.theme)?void 0:o.checkboxColors)||{}},scrollbarColors:{...ht.scrollbarColors,...(null==(l=n.theme)?void 0:l.scrollbarColors)||{}}}}),c=t.computed(()=>{return{"--lb-item-bg":(e=s.value).itemColors.defaultBackground,"--lb-item-fg":e.itemColors.defaultForeground,"--lb-item-hover-bg":e.itemColors.hoverBackground,"--lb-item-hover-fg":e.itemColors.hoverForeground,"--lb-item-selected-bg":e.itemColors.selectedBackground,"--lb-item-selected-fg":e.itemColors.selectedForeground,"--lb-item-selected-hover-bg":e.itemColors.selectedHoverBackground,"--lb-item-selected-hover-fg":e.itemColors.selectedHoverForeground,"--lb-item-disabled-bg":e.itemColors.disabledBackground,"--lb-item-disabled-fg":e.itemColors.disabledForeground,"--lb-container-bg":e.containerColors.background,"--lb-container-border":e.containerColors.border,"--lb-container-focused-border":e.containerColors.focusedBorder,"--lb-title-fg":e.containerColors.titleForeground,"--lb-checkbox-border":e.checkboxColors.border,"--lb-checkbox-bg":e.checkboxColors.background,"--lb-checkbox-checked-bg":e.checkboxColors.checkedBackground,"--lb-checkbox-checked-border":e.checkboxColors.checkedBorder,"--lb-checkbox-hover-border":e.checkboxColors.hoverBorder,"--lb-scrollbar-track-bg":e.scrollbarColors.trackBackground,"--lb-scrollbar-thumb-bg":e.scrollbarColors.thumbBackground,"--lb-scrollbar-thumb-hover-bg":e.scrollbarColors.thumbHoverBackground};var e}),d=t.computed(()=>({height:`${n.height}px`,width:`${n.width}px`,...c.value}));function u(e){return a.value.has(e)}function p(e){n.multiSelect?a.value.has(e.value)?a.value.delete(e.value):a.value.add(e.value):(a.value.clear(),a.value.add(e.value)),r("selectionChange",Array.from(a.value))}return o({getSelectedValues:()=>Array.from(a.value),clearSelection:()=>{a.value.clear(),r("selectionChange",[])},selectValue:e=>{n.multiSelect||a.value.clear(),a.value.add(e),r("selectionChange",Array.from(a.value))}}),(o,l)=>(t.openBlock(),t.createElementBlock("div",ko,[e.title?(t.openBlock(),t.createElementBlock("div",Eo,t.toDisplayString(e.title),1)):t.createCommentVNode("",!0),t.createElementVNode("div",{class:t.normalizeClass(["listbox",{"listbox--multi":e.multiSelect}]),style:t.normalizeStyle(d.value)},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(e.items,o=>(t.openBlock(),t.createElementBlock("div",{key:o.value,class:t.normalizeClass(["listbox-item",{"listbox-item--selected":u(o.value),"listbox-item--hover":i.value===o.value}]),onClick:e=>p(o),onMouseenter:e=>i.value=o.value,onMouseleave:l[0]||(l[0]=e=>i.value=null)},[e.multiSelect?(t.openBlock(),t.createElementBlock("input",{key:0,type:"checkbox",checked:u(o.value),class:"listbox-checkbox",onClick:t.withModifiers(e=>p(o),["stop"])},null,8,Ro)):t.createCommentVNode("",!0),t.createElementVNode("span",No,t.toDisplayString(o.name),1)],42,So))),128))],6)]))}}),[["__scopeId","data-v-3a870de9"]]),Io={class:"search-panel__header"},Vo=["title"],_o={key:0,class:"search-panel__count"},Ao={key:0,class:"search-panel__content"},$o={class:"search-panel__row"},To=["disabled"],Bo={class:"search-panel__options"},Do={class:"search-panel__checkbox"},zo={key:0,class:"search-panel__threshold"},Oo={key:0,class:"search-panel__results"},Fo={class:"search-panel__navigation"},Ho=["disabled"],Po={class:"search-panel__nav-info"},Mo=["disabled"],Lo=bt(t.defineComponent({__name:"SearchPanel",props:{visible:{type:Boolean},gridId:{}},setup(e){const o=Je(e.gridId||"dataGrid")(),{searchInRows:l,goToNextResult:n,goToPreviousResult:r,currentResultIndex:a}=qe(t.toRef(o,"rows")),i=t.ref(!1),s=t.ref(""),c=t.ref("Contains"),d=t.ref(!1),u=t.ref(3),p=function(e,t){let o=null;return function(...l){o&&clearTimeout(o),o=setTimeout(()=>{e(...l)},t)}}(()=>{s.value.trim()?(l(s.value,c.value,{caseSensitive:d.value,fuzzyThreshold:u.value}),o.setSearchQuery(s.value)):o.clearSearch()},300);function h(){p()}function m(){s.value="",o.clearSearch()}function g(){i.value=!i.value}return(e,l)=>{var p,f;return t.openBlock(),t.createElementBlock("div",{class:t.normalizeClass(["search-panel",{"search-panel--collapsed":i.value}])},[t.createElementVNode("div",Io,[t.createElementVNode("button",{class:"search-panel__toggle",onClick:g,title:i.value?"Expand search":"Collapse search"},t.toDisplayString(i.value?"â–¶":"â–¼"),9,Vo),l[6]||(l[6]=t.createElementVNode("span",{class:"search-panel__title"},"Search",-1)),(null==(p=t.unref(o).searchResults)?void 0:p.length)>0?(t.openBlock(),t.createElementBlock("span",_o,t.toDisplayString(t.unref(o).searchResults.length)+" result(s) ",1)):t.createCommentVNode("",!0)]),i.value?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",Ao,[t.createElementVNode("div",$o,[t.withDirectives(t.createElementVNode("input",{"onUpdate:modelValue":l[0]||(l[0]=e=>s.value=e),type:"text",class:"search-panel__input",placeholder:"Enter search query...",onInput:h},null,544),[[t.vModelText,s.value]]),t.withDirectives(t.createElementVNode("select",{"onUpdate:modelValue":l[1]||(l[1]=e=>c.value=e),class:"search-panel__mode-select",onChange:h},[...l[7]||(l[7]=[t.createStaticVNode('<option value="Exact" data-v-5c4e957c>Exact</option><option value="Contains" data-v-5c4e957c>Contains</option><option value="StartsWith" data-v-5c4e957c>Starts With</option><option value="EndsWith" data-v-5c4e957c>Ends With</option><option value="Regex" data-v-5c4e957c>Regex</option><option value="Fuzzy" data-v-5c4e957c>Fuzzy</option>',6)])],544),[[t.vModelSelect,c.value]]),t.createElementVNode("button",{class:"search-panel__clear-btn",onClick:m,disabled:!s.value,title:"Clear search"}," âœ• ",8,To)]),t.createElementVNode("div",Bo,[t.createElementVNode("label",Do,[t.withDirectives(t.createElementVNode("input",{"onUpdate:modelValue":l[2]||(l[2]=e=>d.value=e),type:"checkbox",onChange:h},null,544),[[t.vModelCheckbox,d.value]]),l[8]||(l[8]=t.createElementVNode("span",null,"Case sensitive",-1))]),"Fuzzy"===c.value?(t.openBlock(),t.createElementBlock("label",zo,[t.createElementVNode("span",null,"Threshold: "+t.toDisplayString(u.value),1),t.withDirectives(t.createElementVNode("input",{"onUpdate:modelValue":l[3]||(l[3]=e=>u.value=e),type:"range",min:"0",max:"10",step:"1",class:"search-panel__slider",onInput:h},null,544),[[t.vModelText,u.value,void 0,{number:!0}]])])):t.createCommentVNode("",!0)]),s.value&&(null==(f=t.unref(o).searchResults)?void 0:f.length)>0?(t.openBlock(),t.createElementBlock("div",Oo,[t.createElementVNode("div",Fo,[t.createElementVNode("button",{class:"search-panel__nav-btn",onClick:l[4]||(l[4]=(...e)=>t.unref(r)&&t.unref(r)(...e)),disabled:t.unref(a)<=0,title:"Previous result"}," â†‘ ",8,Ho),t.createElementVNode("span",Po,t.toDisplayString(t.unref(a)+1)+" / "+t.toDisplayString(t.unref(o).searchResults.length),1),t.createElementVNode("button",{class:"search-panel__nav-btn",onClick:l[5]||(l[5]=(...e)=>t.unref(n)&&t.unref(n)(...e)),disabled:t.unref(a)>=t.unref(o).searchResults.length-1,title:"Next result"}," â†“ ",8,Mo)])])):t.createCommentVNode("",!0)]))],2)}}}),[["__scopeId","data-v-5c4e957c"]]),Go={class:"filter-row"},Uo={class:"filter-row__header"},jo=["title"],Wo={key:0,class:"filter-row__count"},qo={key:0,class:"filter-row__content"},Ko={class:"filter-row__filters"},Jo=["onUpdate:modelValue"],Qo=["value"],Yo=["onUpdate:modelValue"],Xo=["onUpdate:modelValue"],Zo=["onUpdate:modelValue"],el=["onClick"],tl={key:0,class:"filter-row__active"},ol={class:"filter-row__active-list"},ll={key:0},nl=["onClick"],rl=bt(t.defineComponent({__name:"FilterRow",props:{gridId:{}},setup(e){const o=Je(e.gridId||"dataGrid")(),l=t.ref(!1),n=t.ref([{columnName:"",operator:"Contains",value:"",logicOperator:"AND"}]),r=t.computed(()=>o.columns.filter(e=>!e.specialType)),a=t.computed(()=>n.value.filter(e=>e.columnName&&(e.value||["IsEmpty","IsNotEmpty"].includes(e.operator)))),i=t.computed(()=>a.value.length);function s(){n.value.push({columnName:"",operator:"Contains",value:"",logicOperator:"AND"})}function c(e){n.value.splice(e,1),0===n.value.length&&s(),u()}function d(){n.value=[{columnName:"",operator:"Contains",value:"",logicOperator:"AND"}],o.clearFilter()}function u(){const e=a.value;if(0!==e.length)if(1===e.length){const t=e[0],l={type:"simple",columnName:t.columnName,operator:t.operator,value:t.value};o.setFilter(l)}else{let t={type:"simple",columnName:e[0].columnName,operator:e[0].operator,value:e[0].value};for(let o=1;o<e.length;o++){const l=e[o];t={type:"composite",operator:e[o-1].logicOperator,left:t,right:{type:"simple",columnName:l.columnName,operator:l.operator,value:l.value}}}o.setFilter(t)}else o.clearFilter()}function p(){l.value=!l.value}function h(e){const t=o.columns.find(t=>t.name===e);return(null==t?void 0:t.header)||e}return(e,o)=>(t.openBlock(),t.createElementBlock("div",Go,[t.createElementVNode("div",Uo,[t.createElementVNode("button",{class:"filter-row__toggle",onClick:p,title:l.value?"Expand filters":"Collapse filters"},t.toDisplayString(l.value?"â–¶":"â–¼"),9,jo),o[0]||(o[0]=t.createElementVNode("span",{class:"filter-row__title"},"Filters",-1)),i.value>0?(t.openBlock(),t.createElementBlock("span",Wo,t.toDisplayString(i.value)+" active ",1)):t.createCommentVNode("",!0),i.value>0?(t.openBlock(),t.createElementBlock("button",{key:1,class:"filter-row__clear-all",onClick:d,title:"Clear all filters"}," Clear All ")):t.createCommentVNode("",!0)]),l.value?t.createCommentVNode("",!0):(t.openBlock(),t.createElementBlock("div",qo,[t.createElementVNode("div",Ko,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(n.value,(e,l)=>(t.openBlock(),t.createElementBlock("div",{key:l,class:"filter-row__filter-item"},[t.withDirectives(t.createElementVNode("select",{"onUpdate:modelValue":t=>e.columnName=t,class:"filter-row__column-select",onChange:u},[o[1]||(o[1]=t.createElementVNode("option",{value:""},"Select column...",-1)),(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(r.value,(e,o)=>(t.openBlock(),t.createElementBlock("option",{key:`col-${o}`,value:e.name},t.toDisplayString(e.header),9,Qo))),128))],40,Jo),[[t.vModelSelect,e.columnName]]),t.withDirectives(t.createElementVNode("select",{"onUpdate:modelValue":t=>e.operator=t,class:"filter-row__operator-select",onChange:u},[...o[2]||(o[2]=[t.createStaticVNode('<option value="Equals" data-v-ef184647>Equals</option><option value="NotEquals" data-v-ef184647>Not Equals</option><option value="Contains" data-v-ef184647>Contains</option><option value="StartsWith" data-v-ef184647>Starts With</option><option value="EndsWith" data-v-ef184647>Ends With</option><option value="GreaterThan" data-v-ef184647>Greater Than</option><option value="LessThan" data-v-ef184647>Less Than</option><option value="GreaterThanOrEquals" data-v-ef184647>â‰¥</option><option value="LessThanOrEquals" data-v-ef184647>â‰¤</option><option value="IsEmpty" data-v-ef184647>Is Empty</option><option value="IsNotEmpty" data-v-ef184647>Is Not Empty</option>',11)])],40,Yo),[[t.vModelSelect,e.operator]]),["IsEmpty","IsNotEmpty"].includes(e.operator)?t.createCommentVNode("",!0):t.withDirectives((t.openBlock(),t.createElementBlock("input",{key:0,"onUpdate:modelValue":t=>e.value=t,type:"text",class:"filter-row__value-input",placeholder:"Filter value...",onInput:u},null,40,Xo)),[[t.vModelText,e.value]]),l<n.value.length-1?t.withDirectives((t.openBlock(),t.createElementBlock("select",{key:1,"onUpdate:modelValue":t=>e.logicOperator=t,class:"filter-row__logic-select",onChange:u},[...o[3]||(o[3]=[t.createElementVNode("option",{value:"AND"},"AND",-1),t.createElementVNode("option",{value:"OR"},"OR",-1)])],40,Zo)),[[t.vModelSelect,e.logicOperator]]):t.createCommentVNode("",!0),t.createElementVNode("button",{class:"filter-row__remove-btn",onClick:e=>c(l),title:"Remove filter"}," âœ• ",8,el)]))),128))]),t.createElementVNode("button",{class:"filter-row__add-btn",onClick:s}," + Add Filter "),i.value>0?(t.openBlock(),t.createElementBlock("div",tl,[o[4]||(o[4]=t.createElementVNode("div",{class:"filter-row__active-title"},"Active filters:",-1)),t.createElementVNode("div",ol,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(a.value,(e,o)=>(t.openBlock(),t.createElementBlock("span",{key:o,class:"filter-row__active-chip"},[t.createTextVNode(t.toDisplayString(h(e.columnName))+" ",1),t.createElementVNode("strong",null,t.toDisplayString(e.operator),1),e.value?(t.openBlock(),t.createElementBlock("span",ll,'"'+t.toDisplayString(e.value)+'"',1)):t.createCommentVNode("",!0),t.createElementVNode("button",{class:"filter-row__chip-remove",onClick:t=>c(n.value.indexOf(e))}," âœ• ",8,nl)]))),128))])])):t.createCommentVNode("",!0)]))]))}}),[["__scopeId","data-v-ef184647"]]);function al(e){e.component("DataGrid",Co),e.component("ListBox",xo),e.component("SearchPanel",Lo),e.component("FilterRow",rl)}const il={install:al};e.AdvancedTable=Co,e.DataGrid=Co,e.FilterRow=rl,e.ListBox=xo,e.SearchPanel=Lo,e.createPinia=function(){const e=t.effectScope(!0),o=e.run(()=>t.ref({}));let l=[],n=[];const r=t.markRaw({install(e){K(r),r._a=e,e.provide(J,r),e.config.globalProperties.$pinia=r,"production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV&&Z&&Ne(e,r),n.forEach(e=>l.push(e)),n=[]},use(e){return this._a?l.push(e):n.push(e),this},_p:l,_a:null,_e:e,_s:new Map,state:o});return"production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV&&Z&&"undefined"!=typeof Proxy&&r.use(_e),r},e.default=il,e.getActivePinia=()=>t.hasInjectionContext()&&t.inject(J)||U,e.gridApi=ut,e.install=al,e.setActivePinia=K,e.useAutoRowHeight=Ze,e.useDataGridStore=Je,e.useFiltering=We,e.useSearch=qe,e.useShortcuts=tt,e.useValidation=Qe,Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=rpa-web-ui.umd.js.map
